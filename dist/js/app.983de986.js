(function(e){function t(t){for(var i,a,o=t[0],u=t[1],c=t[2],f=0,d=[];f<o.length;f++)a=o[f],r[a]&&d.push(r[a][0]),r[a]=0;for(i in u)Object.prototype.hasOwnProperty.call(u,i)&&(e[i]=u[i]);l&&l(t);while(d.length)d.shift()();return n.push.apply(n,c||[]),s()}function s(){for(var e,t=0;t<n.length;t++){for(var s=n[t],i=!0,o=1;o<s.length;o++){var u=s[o];0!==r[u]&&(i=!1)}i&&(n.splice(t--,1),e=a(a.s=s[0]))}return e}var i={},r={app:0},n=[];function a(t){if(i[t])return i[t].exports;var s=i[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=e,a.c=i,a.d=function(e,t,s){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(s,i,function(t){return e[t]}.bind(null,i));return s},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var l=u;n.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("cd49")},"09f2":function(e,t,s){},"18da":function(e,t,s){"use strict";var i=s("6b6f"),r=s.n(i);r.a},"1cde":function(e,t,s){},"38de":function(e,t,s){},6018:function(e,t,s){"use strict";var i=s("b202"),r=s.n(i);r.a},"61ae":function(e,t,s){"use strict";var i=s("1cde"),r=s.n(i);r.a},"64dc":function(e,t,s){},"6b6f":function(e,t,s){},"6f19":function(e,t,s){"use strict";var i=s("ea45"),r=s.n(i);r.a},"8b36":function(e,t,s){},9804:function(e,t,s){"use strict";var i=s("9a27"),r=s.n(i);r.a},"9a27":function(e,t,s){},"9d64":function(e,t,s){e.exports=s.p+"assets/logo1cbf7568.png"},b202:function(e,t,s){},bac7:function(e,t,s){"use strict";var i=s("09f2"),r=s.n(i);r.a},bce9:function(e,t,s){"use strict";var i=s("f156"),r=s.n(i);r.a},c68c:function(e,t,s){"use strict";var i=s("38de"),r=s.n(i);r.a},cd49:function(e,t,s){"use strict";s.r(t);var i=s("2b0e"),r=s("4380"),n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return"checkbox"===e.type?s("input",e._b({directives:[{name:"model",rawName:"v-model",value:e.mask,expression:"mask"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.mask)?e._i(e.mask,null)>-1:e.mask},on:{change:function(t){var s=e.mask,i=t.target,r=!!i.checked;if(Array.isArray(s)){var n=null,a=e._i(s,n);i.checked?a<0&&(e.mask=s.concat([n])):a>-1&&(e.mask=s.slice(0,a).concat(s.slice(a+1)))}else e.mask=r}}},"input",e.bind,!1)):"radio"===e.type?s("input",e._b({directives:[{name:"model",rawName:"v-model",value:e.mask,expression:"mask"}],attrs:{type:"radio"},domProps:{checked:e._q(e.mask,null)},on:{change:function(t){e.mask=null}}},"input",e.bind,!1)):s("input",e._b({directives:[{name:"model",rawName:"v-model",value:e.mask,expression:"mask"}],attrs:{type:e.type},domProps:{value:e.mask},on:{input:function(t){t.target.composing||(e.mask=t.target.value)}}},"input",e.bind,!1))},a=[],o=(s("ac1f"),s("1276"),s("2909")),u={props:["type","value","bind"],computed:{format:function(){return"date"==this.type?"YYYY-MM-DD":"HH:mm"},mask:{get:function(){return this.$options.filters.dateFormat(this.value,this.format)},set:function(e){var t;if("date"==this.type)t=new Date("".concat(e,"T00:00:01"));else{var s;t=new Date(this.value);var i=e.split(":");(s=t).setHours.apply(s,Object(o["a"])(i))}this.$emit("input",t)}}},methods:{onDateTimeSelected:function(e){this.$emit("input",e.value)}}},c=u,l=s("2877"),f=Object(l["a"])(c,n,a,!1,null,null,null),d=f.exports,h=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"modal-container",attrs:{"focus-trap":"true"},on:{click:e.clickOutside}},[s("div",{staticClass:"ns-modal emsa-modal"},[e._t("default")],2)])},m=[],p={methods:{clickOutside:function(e){e.target==this.$el&&this.$parent.$close(null)}}},v=p,g=(s("9804"),Object(l["a"])(v,h,m,!1,null,null,null)),b=g.exports,w=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("router-link",{staticClass:"button cta--is-round cta--is-back fas fa-angle-left",attrs:{to:e.to,"aria-label":"back"}})},_=[],y={props:{to:{default:function(){return{name:"ShiftList"}}}}},k=y,S=Object(l["a"])(k,w,_,!1,null,null,null),x=S.exports;function F(e){e.use(r["b"]),e.component("DateInput",d),e.component("ModalContainer",b),e.component("BackButton",x)}var L=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"emsa-root"},[s("header",[s("nav",[s("ul",{staticClass:"emsa-menu"},e._l(e.menuTabs,(function(t,i){return s("li",{key:i,staticClass:"emsa-menu__item",class:{"emsa-menu__item--is-selected":t.isSelected}},[s("router-link",{attrs:{to:t.route}},[e._v(e._s(t.title))])],1)})),0)])]),s("main",[s("div",{staticClass:"notification text-center"},[e._v(e._s(e.notification))]),s("router-view",e._g({staticClass:"emsa-page"},e.currentPageListeners))],1),s("dialogs-wrapper")],1)},C=[],O=(s("caad"),s("b0c0"),s("d3b7"),s("2532"),s("96cf"),s("1da1")),P=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"side-padded"},[s("back-button"),s("h1",{staticClass:"h1 text-center"},[e._v("List a Shift")]),s("form",{staticClass:"form",attrs:{novalidate:""},on:{submit:e.submitForm}},[e._l(e.fields,(function(t){return s("div",{key:t.fieldName,staticClass:"form-field"},[s("label",{staticClass:"form-field__label",attrs:{for:t.fieldName}},[e._v(e._s(t.label))]),"radio"==t.inputType?s("div",{attrs:{role:"radiogroup"}},e._l(t.values,(function(i){return s("span",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.shift[t.fieldName],expression:"shift[f.fieldName]"}],attrs:{type:"radio",id:t.fieldName+"-"+i},domProps:{value:i.value,checked:e._q(e.shift[t.fieldName],i.value)},on:{change:function(s){return e.$set(e.shift,t.fieldName,i.value)}}}),s("label",{attrs:{for:t.fieldName+"-"+i}},[e._v(e._s(i.label))])])})),0):s("div",["date"==t.inputType||"time"==t.inputType?s("date-input",{attrs:{type:t.inputType},model:{value:e.shift[t.fieldName],callback:function(s){e.$set(e.shift,t.fieldName,s)},expression:"shift[f.fieldName]"}}):"checkbox"===t.inputType?s("input",{directives:[{name:"model",rawName:"v-model",value:e.shift[t.fieldName],expression:"shift[f.fieldName]"}],attrs:{id:t.fieldName,type:"checkbox"},domProps:{checked:Array.isArray(e.shift[t.fieldName])?e._i(e.shift[t.fieldName],null)>-1:e.shift[t.fieldName]},on:{change:function(s){var i=e.shift[t.fieldName],r=s.target,n=!!r.checked;if(Array.isArray(i)){var a=null,o=e._i(i,a);r.checked?o<0&&e.$set(e.shift,t.fieldName,i.concat([a])):o>-1&&e.$set(e.shift,t.fieldName,i.slice(0,o).concat(i.slice(o+1)))}else e.$set(e.shift,t.fieldName,n)}}}):"radio"===t.inputType?s("input",{directives:[{name:"model",rawName:"v-model",value:e.shift[t.fieldName],expression:"shift[f.fieldName]"}],attrs:{id:t.fieldName,type:"radio"},domProps:{checked:e._q(e.shift[t.fieldName],null)},on:{change:function(s){return e.$set(e.shift,t.fieldName,null)}}}):s("input",{directives:[{name:"model",rawName:"v-model",value:e.shift[t.fieldName],expression:"shift[f.fieldName]"}],attrs:{id:t.fieldName,type:t.inputType},domProps:{value:e.shift[t.fieldName]},on:{input:function(s){s.target.composing||e.$set(e.shift,t.fieldName,s.target.value)}}})],1)])})),e._m(0)],2)],1)},A=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"text-center"},[s("input",{staticClass:"button",attrs:{type:"submit"}})])}],N=(s("4160"),s("d81d"),s("159b"),s("ddb0"),s("d4ec")),T=function e(t){Object(N["a"])(this,e),this.isOffering=!0,this.isField=!0,this.position=0,this.isOcp=!1,this.shiftDate=new Date,this.shiftLetter="A",this.timeFrame=12,this.shiftStart=new Date((new Date).setHours(10,0,0,0)),this.shiftEnd=new Date((new Date).setHours(22,0,0,0)),this.tradePreference=0,this.tradeDates="",this.notes="",this.email="",Object.assign(this,t),this.shiftDate=new Date(this.shiftDate),this.shiftStart=new Date(this.shiftStart),this.shiftEnd=new Date(this.shiftEnd)},D=s("bee2"),M=(s("c975"),s("25f0"),function(){function e(t){Object(N["a"])(this,e),this.trueValue=t[0],this.falseValue=t[1]}return Object(D["a"])(e,[{key:"convertFrom",value:function(e){return e?this.trueValue:this.falseValue}},{key:"convertTo",value:function(e){return e==this.trueValue}}]),e}()),$=function(){function e(t){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;Object(N["a"])(this,e),this.values=t,this.offset=s,this.notFound=i}return Object(D["a"])(e,[{key:"convertFrom",value:function(e){return e-this.offset<0?this.notFound:this.values[e-this.offset]}},{key:"convertTo",value:function(e){return this.values.indexOf(e)+this.offset}}]),e}(),U=function(){function e(t){Object(N["a"])(this,e),this.nanString=t}return Object(D["a"])(e,[{key:"convertFrom",value:function(e){return e<0?this.nanString:e.toString()}},{key:"convertTo",value:function(e){var t=parseInt(e);return isNaN(t)?-1:t}}]),e}(),j=function(){function e(){Object(N["a"])(this,e)}return Object(D["a"])(e,[{key:"convertFrom",value:function(e){return e&&e.toString()}},{key:"convertTo",value:function(e){return e}}]),e}(),E=function(){function e(t){Object(N["a"])(this,e),this.shift=t,this.annotatedFields=["isOffering","isField","position","isOcp","shiftDate","shiftLetter","timeFrame","shiftStart","shiftEnd","tradePreference","tradeDates","notes"]}return Object(D["a"])(e,[{key:"getFieldInputType",value:function(e){switch(e){case"isField":case"position":case"isOffering":case"isOcp":case"tradePreference":case"shiftLetter":case"timeFrame":return"radio";case"shiftDate":return"date";case"shiftStart":case"shiftEnd":return"time";case"notes":return"textarea";default:return"text"}}},{key:"getFieldLabel",value:function(e){var t=void 0,s=this.shift.isOffering;switch(e){case"isField":t="Is this shift Comm or Field?";break;case"position":t=s?"What position is the shift for?":"What's your position?";break;case"isOffering":t="Are you offering a shift or picking up a shift?";break;case"shiftDate":t=s?"What date is the shift you're offering?":"What date are you looking for a shift on?";break;case"isOcp":t=s?"What type of shift are you offering?":"What type of shift are you looking for?";break;case"tradePreference":t="Do you want a trade for this shift?";break;case"shiftStart":t=s?"When does the shift start?":"When should the shift start?";break;case"shiftEnd":t=s?"When does the shift end?":"When should the shift start?";break;case"tradeDates":t=this.shift.tradePreference<0?void 0:"What dates would you be open to trading for?";break;case"notes":t="Any notes about the shift?";break;case"shiftLetter":t=this.shift.isOffering?"Which shift?":void 0;break;case"timeFrame":t=(s?"Is this shift a":"Should this shift be")+" 12, a 24, or something else? (explain something else in the notes)";break}return t}},{key:"getFieldValueLabels",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];switch(e){case"isField":return["Field","Comm"];case"position":return["Medic","CS","Captain","Commander"];case"isOffering":return t?["Offering","Seeking"]:["Offering","Picking Up"];case"isOcp":return["OCP","Shift"];case"tradePreference":return t?["No Trade","Open to Trade","Trade Only"]:["No Thanks","I'm Open","Trade Required"];case"shiftLetter":return["A","B","C","D"];case"timeFrame":return["12","24","Other"]}}},{key:"getFieldValueConverter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=this.getFieldValueLabels(e,t);if(s)switch(e){case"isField":case"isOffering":case"isOcp":return new M(s);case"position":return new $(s);case"tradePreference":return new $(s,-1);case"timeFrame":return new U("Other");default:return new j}}},{key:"getFieldValueName",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=this.shift[e],i=this.getFieldValueConverter(e,t);return i?i.convertFrom(s):s}},{key:"getFieldFilterName",value:function(e){switch(e){case"isOffering":return"Post Type";case"isField":return"Comm or Field";case"position":return"Position";case"isOcp":return"Shift Type";case"tradePreference":return"Trade Preference";case"tradeDates":return this.shift&&this.shift.tradePreference<0?void 0:"Trade Dates";case"notes":return"Notes";case"shiftLetter":return this.shift&&this.shift.isOffering?"A, B, C, or D?":void 0;case"timeFrame":return"12, 24, or Other?"}return e}}]),e}(),I=(s("99af"),s("5530")),V=s("bc3a"),R=s.n(V);s("5319");function q(e){return e.replace(/(_\w)/g,(function(e){return e[1].toUpperCase()}))}function B(e){return e.replace(/[\w]([A-Z])/g,(function(e){return e[0]+"_"+e[1]})).toLowerCase()}function Y(e){var t=q(JSON.stringify(e));return JSON.parse(t)}var W={saveAuthToken:function(){},getAuthToken:function(){return"token"},saveState:function(){},getState:function(){},logout:function(){return!0},isAuthed:function(){return!0}},K=W,H=s("4328"),J=s.n(H),Q="https://cryptic-brook-18592.herokuapp.com";function z(e){var t=e.getTimezoneOffset()/60,s=t<0?"+":"-";return"".concat(Object(r["a"])(e,"YYYY-MM-DDTHH:mm:ss")).concat(s).concat(Math.abs(t),"00")}function G(e){return J.a.stringify(e,{arrayFormat:"brackets",serializeDate:z,encoder:function(e,t,s,i){return"key"==i&&(e=B(e)),t(e,t,s)}})}var Z,X=R.a.create({baseURL:Q,withCredentials:!0,transformRequest:[G],paramsSerializer:G});function ee(e){return{}}function te(e){return function(t){console.log(t),"function"==typeof e&&e(t)}}var se={signup:function(e){return new Promise((function(t,s){X.post("/signup",{user:e}).then(t).catch(te(s))}))},login:function(e){return new Promise((function(t,s){X.post("/oauth/token",Object(I["a"])(Object(I["a"])({},e),{},{grant_type:"password",scope:"web"})).then((function(e){Z=e.data.access_token,K.saveAuthToken(Z),t()})).catch(te(s))}))},logout:function(){return X.post("/oauth/revoke")},getShifts:function(e,t,s){return X.get("/shifts",{params:e,headers:ee()}).then((function(e){var s=Y(e.data).sort((function(e,t){var s=new Date(e.shiftDate).getTime()-new Date(t.shiftDate).getTime();return 0==s&&(s=new Date(e.shiftStart).getTime()-new Date(t.shiftStart).getTime()),s}));t&&t(s)})).catch((function(e){console.log(e),s&&s(e)}))},submitShift:function(e){return X.post("/shifts",{shift:e},{headers:ee()})},getShift:function(e){return new Promise((function(t,s){X.get("/shifts/".concat(e)).then((function(e){t(e.data)})).catch(s)}))},deleteShift:function(e){return X.delete("/shifts/".concat(e.id),{headers:ee()})},testToken:function(){return new Promise((function(e){var t=K.getAuthToken();t||e(!1),X.get("/oauth/token/info",{headers:ee()}).then((function(t){return e(t)})).catch((function(){return e(!1)}))}))},getAdminData:function(e){return X.get("/users",{params:{all:e}})},adminPost:function(e,t){return X.post("/bulk_".concat(e),{user_ids:t})}},ie=se;s("b64b");function re(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e};return e?e instanceof Array?e.map((function(e){return t(e)})):[t(e)]:[]}function ne(e){return"boolean"==typeof e?e:"true"==e.toLowerCase()}function ae(e){"string"!=typeof e||isNaN(parseInt(e))||(e=parseInt(e));var t=new Date(e);return isNaN(t.getTime())?new Date:t}var oe=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(N["a"])(this,e),this.isField=re(t.isField,ne),this.position=re(t.position,parseInt),this.isOffering=re(t.isOffering,ne),this.isOcp=re(t.isOcp,ne),this.shiftLetter=re(t.shiftLetter),this.timeFrame=re(t.timeFrame,parseInt),this.tradePreference=re(t.tradePreference,parseInt),this.date=re(t.date||[new Date],ae),this.dateType=t.dateType||"After"}return Object(D["a"])(e,[{key:"asQuery",value:function(){var e=this,t={};return this.sortedKeys.forEach((function(s){if("date"==s)t[s]=e[s].map((function(e){return e.getTime().toString()}));else if("dateType"==s)t[s]=e[s];else{var i=e[s];i instanceof Array&&i.length>0&&(t[s]=i.map((function(e){return e.toString()})))}})),t}},{key:"equals",value:function(e){return JSON.stringify(this,this.sortedKeys)==JSON.stringify(e,this.sortedKeys)}},{key:"sortedKeys",get:function(){return Object.keys(this).sort()}}]),e}();oe.checkboxFields=["isOffering","isField","position","isOcp","shiftLetter","timeFrame","tradePreference"];var ue,ce,le=function(){function e(){Object(N["a"])(this,e),this.state={selectedShift:null,scrollIndex:0,currentList:[],userList:[],loginIndex:0,currentFilters:new oe,isAuthed:null,isAdmin:!1}}return Object(D["a"])(e,[{key:"testToken",value:function(){var e=Object(O["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ie.testToken();case 2:return t=e.sent,!1===t?this.isAuthed=!1:(this.state.isAuthed=!0,this.state.isAdmin=t.data.admin,this.saveState()),e.abrupt("return",this.isAuthed);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"logout",value:function(){var e=this;return new Promise((function(t){ie.logout().then((function(){K.logout(),e.state.isAuthed=!1,e.clearState(),t(!0)})).catch((function(e){console.log(e),t(!1)}))}))}},{key:"saveState",value:function(){this.saveStateMethod&&this.saveStateMethod()}},{key:"reviveState",value:function(e){e&&!e.noState&&(Object.assign(this.state,e),this.state.currentFilters=new oe(e.currentFilters))}},{key:"loadList",value:function(e){var t=this;return ie.getShifts(this.state.currentFilters,(function(s){t.currentList=s,t.onListSuccess&&t.onListSuccess(),"function"==typeof e&&e()}),(function(e){e.response&&t.onListError&&[401,403].includes(e.response.status)&&t.onListError(e)}))}},{key:"clearState",value:function(){this.state.selectedShift=null,this.state.scrollIndex=0,this.state.currentList=[],this.state.currentFilters=new oe,this.saveState()}},{key:"selectedShift",get:function(){return this.state.selectedShift},set:function(e){this.state.selectedShift=e,this.saveState()}},{key:"scrollIndex",get:function(){return this.state.scrollIndex},set:function(e){this.state.scrollIndex=e,this.saveState()}},{key:"currentList",get:function(){return this.state.currentList},set:function(e){e=e.map((function(e){return new T(e)})),this.state.currentList=e.sort((function(e,t){var s=e.shiftDate.valueOf()-t.shiftDate.valueOf();return 0==s&&(s=e.shiftStart.valueOf()-t.shiftStart.valueOf()),s})),this.saveState()}},{key:"currentFilters",get:function(){return this.state.currentFilters},set:function(e){e&&!this.currentFilters.equals(e)&&(this.state.currentFilters=e,this.saveState())}},{key:"userList",get:function(){return this.state.userList},set:function(e){this.state.userList=e}},{key:"loginIndex",get:function(){return this.state.loginIndex},set:function(e){this.state.loginIndex=e,this.saveState()}},{key:"isAuthed",get:function(){return this.state.isAuthed},set:function(e){this.state.isAuthed=e,this.saveState()}},{key:"isAdmin",get:function(){return this.state.isAdmin}}]),e}(),fe=new le,de=fe,he=i["a"].extend({data:function(){return{store:de}},mounted:function(){var e=this;this.$nextTick((function(){e.$emit("pageMounted")}))}}),me={name:"ShiftForm",mixins:[he],data:function(){var e=new T,t={},s=new E(e);return s.annotatedFields.forEach((function(e){var i=s.getFieldInputType(e);t[e]={inputType:i};var r=s.getFieldValueLabels(e);if(r){var n=s.getFieldValueConverter(e);t[e].values=r.map((function(e){return{label:e,value:n?n.convertTo(e):e}}))}})),{shift:e,valueManager:t,viewModel:s}},computed:{fields:function(){var e=[];for(var t in this.shift){var s=this.viewModel.getFieldLabel(t);if(s){var i=this.valueManager[t]||{};e.push({label:s,inputType:i.inputType,values:i.values,fieldName:t})}}return e}},methods:{submitForm:function(e){var t=this;e.preventDefault&&e.preventDefault(),console.log("submitting shift: ",this.shift),ie.submitShift(this.shift).then(Object(O["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,alert("Successfully saved!");case 2:t.$emit("back");case 3:case"end":return e.stop()}}),e)})))).catch((function(e){console.log(e)}))}}},pe=me,ve=Object(l["a"])(pe,P,A,!1,null,"1c94ec22",null),ge=ve.exports,be=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"side-padded"},[s("div",{staticClass:"text-center filter-button"},[s("button",{staticClass:"button",on:{click:e.showFiltersModal}},[e._v("Filters")])]),0==e.store.currentList.length?s("p",[e._v("There are currently no posts that match your search criteria. Please check back again soon, or make your own post seeking a swap")]):e._e(),s("ul",e._l(e.store.currentList,(function(e,t){return s("ShiftListItem",{key:t,attrs:{shift:e}})})),1)])},we=[],_e=i["a"].extend({data:function(){return{forList:!0,displayFields:["isOffering","position","isOcp","isOffering","isField","tradePreference","shiftLetter","timeFrame"]}},computed:{dateFormatFilter:function(){return this.$options.filters&&this.$options.filters.dateFormat},dateString:function(){if(void 0===this.dateFormatFilter)return"";var e=new Date(this.displayedShift.shiftDate),t=e.getFullYear()==(new Date).getFullYear(),s=t?"dddd, M/DD":"dddd, M/DD/YY";return this.dateFormatFilter(e,s)},timeString:function(){if(void 0===this.dateFormatFilter)return"";var e=this.dateFormatFilter(new Date(this.displayedShift.shiftStart),"h:mm a"),t=this.dateFormatFilter(new Date(this.displayedShift.shiftEnd),"h:mm a");return"".concat(e,"-").concat(t)},valueLabels:function(){var e={date:this.dateString,time:this.timeString},t=this;return t.displayFields.forEach((function(s){e[s]=t.viewModel.getFieldValueName(s,t.forList)})),e},displayedShift:function(){return new T},viewModel:function(){return new E(this.displayedShift)}}}),ye={name:"ShiftListItem",mixins:[_e],props:["shift","isUser"],computed:{displayedShift:function(){return this.shift}},render:function(){var e=arguments[0],t="shift-item shift-item--is-".concat(this.valueLabels.isOffering.toLowerCase());return e("li",{class:t},[e("router-link",{attrs:{to:{name:this.isUser?"UserShiftView":"ShiftView",params:{id:this.displayedShift.id}}}},[e("span",{class:"shift-item__is-offering"},[this.valueLabels.isOffering]),e("span",{class:"shift-item__is-ocp"},[this.valueLabels.isOcp]),e("span",{class:"shift-item__position"},[this.valueLabels.position]),e("div",{class:"shift-item__dates"},["".concat(this.valueLabels.date," ").concat(this.valueLabels.time)]),e("div",{class:"shift-item__bottom-row"},[e("span",{class:"shift-item__is-field"},[this.valueLabels.isField]),e("span",{attrs:{className:"shift-item__shift-letter"}},[this.displayedShift.isOffering?this.valueLabels.shiftLetter:""]),e("span",{attrs:{className:"shift-item__time-frame"}},[this.valueLabels.timeFrame]),e("span",{class:"shift-item__trade-preference"},[this.valueLabels.tradePreference])])])])}},ke=ye,Se=(s("bac7"),s("c68c"),Object(l["a"])(ke,ue,ce,!1,null,"98790ee2",null)),xe=Se.exports,Fe=he.extend({name:"ShiftList",components:{ShiftListItem:xe},data:function(){return{dataIsLoading:!1}},methods:{getShifts:function(e){var t=this,s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2?arguments[2]:void 0;this.dataIsLoading=s,this.store.currentFilters=e,this.store.loadList((function(){t.dataIsLoading=!1,"function"==typeof i&&i()}))},onPullToRefresh:function(e){var t=this;this.$nextTick((function(){t.getShifts(t.store.currentFilters,!1,(function(){return t.notifyPullToRefreshFinished(e)}))}))},showFiltersModal:function(){var e=Object(O["a"])(regeneratorRuntime.mark((function e(){var t,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={props:{filters:this.store.currentFilters}},e.next=3,this.showModal(t);case 3:if(s=e.sent,s&&!this.store.currentFilters.equals(s)){e.next=6;break}return e.abrupt("return");case 6:this.getShifts(s),this.onNewFilters(s);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),showModal:function(e){return new Promise((function(e){return e()}))},onNewFilters:function(e){},notifyPullToRefreshFinished:function(e){},scrollListToIndex:function(e){},onScroll:function(e){this.store.scrollIndex=e}},mounted:function(){var e=this;0===this.store.currentList.length?this.getShifts(this.store.currentFilters,!0,(function(){e.scrollListToIndex(e.store.scrollIndex)})):this.$nextTick((function(){e.scrollListToIndex(e.store.scrollIndex)}))}}),Le=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("modal-container",{staticClass:"filter-form"},[s("div",[s("button",{staticClass:"button ns-modal__close-button cta--is-round cta--is-close fas fa-times",attrs:{"aria-label":"close"},on:{click:function(t){return e.$close(null)}}}),s("h1",{staticClass:"filter-form__header"},[e._v("Filter Shift Results")]),s("fieldset",{staticClass:"filter-group"},[s("label",{staticClass:"filter-group__group-label"},[e._v("Dates")]),s("div",[s("select",{directives:[{name:"model",rawName:"v-model",value:e.filterModel.dateType,expression:"filterModel.dateType"}],attrs:{name:"dateType",id:"date-type","aria-label":"Date filter type"},on:{change:[function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.filterModel,"dateType",t.target.multiple?s:s[0])},e.onDateTypeChange]}},e._l(e.dateTypes,(function(t){return s("option",{domProps:{value:t}},[e._v(e._s(t))])})),0),s("date-input",{attrs:{bind:{minDate:e.today},type:"date"},model:{value:e.filterModel.date[0],callback:function(t){e.$set(e.filterModel.date,0,t)},expression:"filterModel.date[0]"}}),"Between"==e.filterModel.dateType?s("date-input",{attrs:{bind:{minDate:e.filterModel.date[0]},type:"date"},model:{value:e.filterModel.date[1],callback:function(t){e.$set(e.filterModel.date,1,t)},expression:"filterModel.date[1]"}}):e._e()],1)]),e._l(e.checkboxFields,(function(t){return s("shift-filter-group",{key:t,attrs:{"filter-key":t},model:{value:e.filterModel[t],callback:function(s){e.$set(e.filterModel,t,s)},expression:"filterModel[filterKey]"}})})),s("div",{staticClass:"text-center"},[s("button",{staticClass:"button",on:{click:function(t){return e.$close(e.filterModel)}}},[e._v("Done")])])],2)])},Ce=[],Oe=(s("fb6a"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("fieldset",{staticClass:"filter-group"},[s("legend",{staticClass:"filter-group__group-label"},[e._v(e._s(e.label))]),s("div",{staticClass:"filter-group__items"},e._l(e.boxes,(function(t,i){return s("span",{key:t},[s("input",{attrs:{id:e.filterKey+"-"+t,type:"checkbox"},domProps:{checked:e.checks[i]},on:{change:function(t){return e.updateValue(t,i)}}}),s("label",{attrs:{for:e.filterKey+"-"+t}},[e._v(e._s(t))])])})),0)])}),Pe=[],Ae=(s("a434"),{props:{value:Array,filterKey:String},data:function(){var e=new E(null);return{viewModel:e,converter:e.getFieldValueConverter(this.filterKey,!0),label:e.getFieldFilterName(this.filterKey),boxes:e.getFieldValueLabels(this.filterKey,!0)}},computed:{checks:function(){var e=this;return this.boxes.map((function(t){var s=e.converter?e.converter.convertTo(t):t;return e.value.indexOf(s)>=0}))}},methods:{updateValue:function(e,t){var s=this.value.slice(),i=e.target?e.target.checked:e.value;if(i!=this.checks[t]){var r=this.converter.convertTo(this.boxes[t]),n=this.value.indexOf(r);i&&n<0?s.push(r):!i&&n>=0&&s.splice(n,1),this.$emit("input",s.sort())}}}}),Ne=Ae,Te=(s("18da"),Object(l["a"])(Ne,Oe,Pe,!1,null,null,null)),De=Te.exports,Me={components:{ShiftFilterGroup:De},props:{filters:Object},data:function(){var e=new E;return{filterModel:new oe(this.filters),checkboxFields:oe.checkboxFields,viewModel:e,dateTypes:["On","Before","After","Between"],today:new Date}},methods:{onDateTypeChange:function(e){if(this.filterModel.dateType=e.object?e.object.selectedValue:e.target.value,"Between"==this.filterModel.dateType){var t=this.filterModel.date[0];this.filterModel.date=[t,t]}else this.filterModel.date=this.filterModel.date.slice(0,1)},onDateChanged:function(e,t){this.filterModel.date[t]=e.value}}},$e=Me,Ue=(s("6018"),Object(l["a"])($e,Le,Ce,!1,null,null,null)),je=Ue.exports,Ee=s("9935"),Ie=Object(Ee["create"])(je),Ve={name:"ShiftList",mixins:[Fe],methods:{showModal:function(e){return Ie(Object(I["a"])({},e.props))},onNewFilters:function(e){this.$router.push({name:"ShiftList",query:e.asQuery()})}}},Re=Ve,qe=(s("d31b"),Object(l["a"])(Re,be,we,!1,null,"2af6cac8",null)),Be=qe.exports,Ye=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"side-padded"},[s("back-button",{attrs:{to:e.backPage}}),s("h1",{staticClass:"h1 text-center"},[e._v(e._s(e.valueLabels.isOffering)+" Shift")]),s("h2",{staticClass:"h2 text-center"},[e._v(e._s(e.valueLabels.date))]),s("h2",{staticClass:"h2 text-center"},[e._v(e._s(e.valueLabels.time))]),s("table",{staticClass:"shift-view"},e._l(e.listedFields,(function(t){return s("tr",{key:t},[s("td",{staticClass:"shift-view__label"},[e._v(e._s(e.fieldLabels[t]))]),s("td",{staticClass:"shift-view__value"},[e._v(e._s(e.valueLabels[t]))])])})),0),s("div",{staticClass:"text-center"},[e.displayedShift.isUser?s("button",{staticClass:"button cta",on:{click:e.deletePost}},[e._v("Delete This Post")]):s("a",{staticClass:"button cta",attrs:{href:e.shiftEmail}},[e._v("Email This Poster")])])],1)},We=[],Ke=(s("4de4"),s("7db0"),s("7039"),s("466d"),/(id|shiftDate|shiftStart|shiftEnd|email)/),He=Object.getOwnPropertyNames(new T).filter((function(e){return!e.match(Ke)})),Je={name:"ShiftView",mixins:[_e,he],data:function(){return{displayFields:He,listedFields:[],rowSpec:[],fieldLabels:{}}},computed:{displayedShift:function(){return this.store.selectedShift},shiftEmail:function(){return"mailto:".concat(this.displayedShift.email)},backPage:function(){return{name:this.displayedShift.isUser?"UserView":"ShiftList"}}},methods:{goBack:function(){this.$emit("back")},openEmail:function(){this.$root.openUrl(this.shiftEmail)},deletePost:function(){var e=this;ie.deleteShift(this.displayedShift).then(Object(O["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,alert("Successfully deleted!");case 2:e.$router?e.$router.push(e.backPage):e.$emit("back");case 3:case"end":return t.stop()}}),t)})))).catch((function(e){console.log(e)}))}},beforeRouteEnter:function(){var e=Object(O["a"])(regeneratorRuntime.mark((function e(t,s,i){var r,n,a,o,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.meta.isUser,n=r?de.userList:de.currentList,e.prev=2,!n.length){e.next=7;break}a=n.find((function(e){return e.id==t.params.id})),e.next=11;break;case 7:return e.next=9,ie.getShift(t.params.id);case 9:o=e.sent,a=new T(o);case 11:a.isUser=r,de.selectedShift=a,i(),e.next=21;break;case 16:return e.prev=16,e.t0=e["catch"](2),u=s.name?s:{name:r?"UserView":"ShiftList"},i(u),e.abrupt("return");case 21:case"end":return e.stop()}}),e,null,[[2,16]])})));function t(t,s,i){return e.apply(this,arguments)}return t}(),beforeRouteLeave:function(e,t,s){de.selectedShift=null,s()},created:function(){for(var e=0;e<He.length;e++){var t=He[e];if("isOffering"!=t){var s=this.viewModel.getFieldFilterName(t);s&&(this.listedFields.push(t),this.fieldLabels[t]=s,this.rowSpec.push("auto"))}}}},Qe=Je,ze=(s("bce9"),Object(l["a"])(Qe,Ye,We,!1,null,"9f1e54be",null)),Ge=ze.exports,Ze=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("form",{staticClass:"side-padded text-center login-form",attrs:{novalidate:""},on:{submit:e.onSubmit}},[i("img",{attrs:{src:s("9d64"),alt:"Austin EMSA Logo"}}),i("h1",{staticClass:"h1"},[e._v("Shift Request "+e._s(e.isAdmin?"Admin Panel":""))]),i("div",{staticClass:"form__message text-center"},[e._v(e._s(e.formMessage))]),e.store.loginIndex<2?i("div",[i("div",{staticClass:"form__error text-center"},[e._v(e._s(e.formError))]),i("div",{staticClass:"form-field"},[i("label",{staticClass:"form-field__label",attrs:{for:"email"}},[e._v("Email")]),i("p",{staticClass:"form-field__error"},[e._v(e._s(e.fieldErrors.email&&"Email "+e.fieldErrors.email[0]))]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.user.email,expression:"user.email"}],staticClass:"form-field__input",attrs:{type:"email",id:"email",autocomplete:"email"},domProps:{value:e.user.email},on:{input:function(t){t.target.composing||e.$set(e.user,"email",t.target.value)}}})]),i("div",{staticClass:"form-field"},[i("label",{staticClass:"form-field__label",attrs:{for:"password"}},[e._v("Password")]),i("p",{staticClass:"form-field__error"},[e._v(e._s(e.fieldErrors.password&&"Password "+e.fieldErrors.password[0]))]),"checkbox"===(e.showPassword?"text":"password")?i("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],staticClass:"form-field__input",attrs:{id:"password",type:"checkbox"},domProps:{checked:Array.isArray(e.user.password)?e._i(e.user.password,null)>-1:e.user.password},on:{change:function(t){var s=e.user.password,i=t.target,r=!!i.checked;if(Array.isArray(s)){var n=null,a=e._i(s,n);i.checked?a<0&&e.$set(e.user,"password",s.concat([n])):a>-1&&e.$set(e.user,"password",s.slice(0,a).concat(s.slice(a+1)))}else e.$set(e.user,"password",r)}}}):"radio"===(e.showPassword?"text":"password")?i("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],staticClass:"form-field__input",attrs:{id:"password",type:"radio"},domProps:{checked:e._q(e.user.password,null)},on:{change:function(t){return e.$set(e.user,"password",null)}}}):i("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],staticClass:"form-field__input",attrs:{id:"password",type:e.showPassword?"text":"password"},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}})]),e.isLogin?e._e():i("div",{staticClass:"form-field"},[i("label",{staticClass:"form-field__label",attrs:{for:"password_confirmation"}},[e._v("Confirm Password")]),i("p",{staticClass:"form-field__error"},[e._v(e._s(e.fieldErrors.password_confirmation&&"Password confrimation "+e.fieldErrors.password_confirmation[0]))]),"checkbox"===(e.showPassword?"text":"password")?i("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password_confirmation,expression:"user.password_confirmation"}],staticClass:"form-field__input",attrs:{id:"password_confirmation",type:"checkbox"},domProps:{checked:Array.isArray(e.user.password_confirmation)?e._i(e.user.password_confirmation,null)>-1:e.user.password_confirmation},on:{change:function(t){var s=e.user.password_confirmation,i=t.target,r=!!i.checked;if(Array.isArray(s)){var n=null,a=e._i(s,n);i.checked?a<0&&e.$set(e.user,"password_confirmation",s.concat([n])):a>-1&&e.$set(e.user,"password_confirmation",s.slice(0,a).concat(s.slice(a+1)))}else e.$set(e.user,"password_confirmation",r)}}}):"radio"===(e.showPassword?"text":"password")?i("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password_confirmation,expression:"user.password_confirmation"}],staticClass:"form-field__input",attrs:{id:"password_confirmation",type:"radio"},domProps:{checked:e._q(e.user.password_confirmation,null)},on:{change:function(t){return e.$set(e.user,"password_confirmation",null)}}}):i("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password_confirmation,expression:"user.password_confirmation"}],staticClass:"form-field__input",attrs:{id:"password_confirmation",type:e.showPassword?"text":"password"},domProps:{value:e.user.password_confirmation},on:{input:function(t){t.target.composing||e.$set(e.user,"password_confirmation",t.target.value)}}})]),i("button",{staticClass:"button cta--is-close",attrs:{type:"button"},on:{click:function(t){e.showPassword=!e.showPassword}}},[e._v(" "+e._s(e.showPassword?"Hide Password":"Show Password")+" ")]),i("div",{staticClass:"form__submit"},[i("input",{staticClass:"button",attrs:{type:"submit"},domProps:{value:e.isLogin?"Log In":"Sign Up"}})])]):e._e()])},Xe=[],et={name:"Login",mixins:[he],props:{isAdmin:Boolean},data:function(){return{formError:"",formMessage:"",fieldErrors:{},isSubmitting:!1,user:{email:"",password:"",password_confirmation:""},showPassword:!1}},computed:{isLogin:function(){return 0==this.store.loginIndex},passwordReturnPress:function(){return this.isLogin?this.onSubmit:function(){}}},methods:{onSubmit:function(e){var t=this;this.formError="",this.formMessage="",this.fieldErrors={},this.isSubmitting=!0,"function"==typeof e.preventDefault&&e.preventDefault(),this.isLogin?ie.login(this.user).then((function(){return t.$emit("authSuccess",t.isAdmin)})).catch(this.onSubmitError):ie.signup(this.user).then((function(){t.store.loginIndex=2,t.formMessage="You have signed up successfully but your account has not been approved by your administrator yet. We'll email you when it's time to come back and log in!"})).catch(this.onSubmitError)},onSubmitError:function(e){this.isSubmitting=!1;var t=e.response.data;t.error_description?this.formError=t.error_description:this.fieldErrors=t.errors}}},tt=et,st=(s("6f19"),Object(l["a"])(tt,Ze,Xe,!1,null,null,null)),it=st.exports,rt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"side-padded"},[s("back-button"),s("h1",{staticClass:"h1 text-center"},[e._v("My Posts")]),s("ul",e._l(e.shifts,(function(e,t){return s("ShiftListItem",{key:t,attrs:{shift:e,"is-user":!0}})})),1),s("div",{staticClass:"text-center"},[s("button",{staticClass:"button button__is-inline",attrs:{type:"button"},on:{click:function(t){return e.$emit("logout")}}},[e._v("Log Out")]),e.store.isAdmin?s("router-link",{staticClass:"button button__is-inline",attrs:{to:{name:"AdminApproval"}}},[e._v("Admin Panel")]):e._e()],1)],1)},nt=[],at=(s("a9e3"),{name:"UserView",mixins:[he],components:{ShiftListItem:xe},props:{scrollIndex:Number},computed:{shifts:function(){return this.store.userList}},methods:{showShift:function(e){var t=this.shifts[e];t.isUser=!0,this.$emit("shiftSelected",t,!0)},getShifts:function(e){var t=this,s=function(){e&&e.object.notifyPullToRefreshFinished()};ie.getShifts({is_user:!0},(function(e){t.store.userList=e,s()}),(function(e){e.response&&401==e.response.status?t.$emit("logout"):s()}))}},mounted:function(){this.getShifts()}}),ot=at,ut=Object(l["a"])(ot,rt,nt,!1,null,null,null),ct=ut.exports,lt={ShiftForm:ge,ShiftList:Be,ShiftView:Ge,Login:it,UserView:ct},ft={data:function(){var e={store:de,notification:""};return e},computed:{currentRoute:function(){return this.$route?this.$route.name:this.currentPage&&this.currentPage.name},currentPageListeners:function(){var e=this,t=function(){return e.setCurrentPage("ShiftList")},s={};switch(this.currentRoute){case"ShiftList":s={shiftSelected:this.onShiftSelected,listRequested:this.loadList};break;case"UserView":s={shiftSelected:this.onShiftSelected,back:t,logout:this.logout};break;case"Login":case"AdminLogin":s={authSuccess:function(s){e.store.isAuthed=!0,s?e.setCurrentPage("AdminApproval"):t()}};break;case"ShiftView":s={back:function(){var t=e.store.selectedShift.isUser?"UserView":"ShiftList";e.setCurrentPage(t)}};break;default:s={back:t};break}return s},menuTabs:function(){var e=this;if(this.currentRoute&&this.currentRoute.includes("Admin"))return"AdminLogin"==this.currentRoute?[]:[{title:"Manage Admins",route:{name:"AdminManagement"},isSelected:"AdminManagement"==this.currentRoute},{title:"Approve Users",route:{name:"AdminApproval"},isSelected:"AdminApproval"==this.currentRoute}];if(this.store.isAuthed){var t=this.store.selectedShift;return[{title:"Post a Shift",action:function(){return e.setCurrentPage("ShiftForm")},isSelected:"ShiftForm"==this.currentRoute,route:{name:"ShiftForm"}},{title:"Find a Shift",action:function(){return e.setCurrentPage("ShiftList")},isSelected:"ShiftList"==this.currentRoute||t&&!t.isUser,route:{name:"ShiftList"}},{title:"My Posts",action:function(){return e.setCurrentPage("UserView")},isSelected:"UserView"==this.currentRoute||t&&t.isUser,route:{name:"UserView"}}]}return[{title:"Returning User",action:function(){return e.store.loginIndex=0},isSelected:0==this.store.loginIndex,route:{name:"Login"}},{title:"New User",action:function(){return e.store.loginIndex=1},isSelected:this.store.loginIndex>0,route:{name:"Signup"}}]}},methods:{saveState:function(){},setCurrentPage:function(e){var t="ShiftList"==e?this.store.currentFilters:{};return this.$router.push({name:e,query:t})},onShiftSelected:function(e){this.store.selectedShift=e,this.setCurrentPage("ShiftView")},loadList:function(e,t){this.store.currentFilters.equals(e)||(this.store.currentFilters=e),this.store.loadList(t)},logout:function(){var e=Object(O["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.store.logout();case 2:t=e.sent,t?(this.store.isAuthed=!1,this.setCurrentPage("Login")):this.notify("Somehow we were unable to log you out. Please try again later");case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),notify:function(e){var t=this;this.notification=e,setTimeout((function(){t.notification=""}),6e4)}},created:function(){this.store.onListError=this.logout,this.store.saveStateMethod=this.saveState}},dt=ft,ht=(s("edbd"),Object(l["a"])(dt,L,C,!1,null,null,null)),mt=ht.exports,pt=(s("45fc"),s("8c4f")),vt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.users.length?s("form",{staticClass:"users-form side-padded",on:{submit:e.submitUsers}},[s("back-button",{attrs:{to:{name:"ShiftList"}}}),s("h1",{staticClass:"h1"},[e._v(e._s(e.title))]),s("table",{staticClass:"users-table"},[s("tr",[s("th",[s("button",{staticClass:"table-sort fas",attrs:{type:"button"},on:{click:function(t){return e.sortBy("email")}}},[s("span",{staticClass:"table-sort__icon fas",class:["email"==e.sortField?"fa-chevron-"+e.sortDirection:"fa-minus"]}),e._v(" Email ")])]),s("th",{staticClass:"users-table__input"},[s("button",{staticClass:"table-sort",attrs:{type:"button"},on:{click:function(t){return e.sortBy(e.propName)}}},[s("span",{staticClass:"table-sort__icon fas",class:[e.sortField==e.propName?"fa-chevron-"+e.sortDirection:"fa-minus"]}),e._v(" "+e._s(e.columnName)+" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.allSelected,expression:"allSelected"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.allSelected)?e._i(e.allSelected,null)>-1:e.allSelected},on:{change:function(t){var s=e.allSelected,i=t.target,r=!!i.checked;if(Array.isArray(s)){var n=null,a=e._i(s,n);i.checked?a<0&&(e.allSelected=s.concat([n])):a>-1&&(e.allSelected=s.slice(0,a).concat(s.slice(a+1)))}else e.allSelected=r}}})])])]),e._l(e.sortedUsers,(function(t){return s("tr",{key:t.id,staticClass:"users-table__user"},[s("td",{staticClass:"user__email"},[e._v(e._s(t.email))]),s("td",{staticClass:"users-table__input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedUsers,expression:"selectedUsers"}],attrs:{type:"checkbox"},domProps:{value:t.id,checked:Array.isArray(e.selectedUsers)?e._i(e.selectedUsers,t.id)>-1:e.selectedUsers},on:{change:function(s){var i=e.selectedUsers,r=s.target,n=!!r.checked;if(Array.isArray(i)){var a=t.id,o=e._i(i,a);r.checked?o<0&&(e.selectedUsers=i.concat([a])):o>-1&&(e.selectedUsers=i.slice(0,o).concat(i.slice(o+1)))}else e.selectedUsers=n}}})])])}))],2),s("input",{staticClass:"button",attrs:{type:"submit"}}),s("div",{staticClass:"users-form__form-status",class:e.statusClass},[e._v(e._s(e.status))])],1):s("div",[e._v(" No users "+e._s(e.title.toLowerCase())+" ")])},gt=[],bt={name:"AdminPanel",data:function(){return{users:[],selectedUsers:[],status:"",title:"",confirmationText:"",columnName:"",allUsers:void 0,sortField:void 0,sortDirection:"down",statusClass:""}},props:{propName:String},watch:{propName:function(e){this.onPropChange(e)}},computed:{allSelected:{get:function(){return this.users.length==this.selectedUsers.length},set:function(e){this.selectedUsers=e?this.users.map((function(e){return e.id})):[]}},sortedUsers:function(){var e=this;return this.users.slice().sort((function(t,s){var i=0,r=t[e.sortField],n=s[e.sortField];return"boolean"==typeof r?(r&&!n&&(i=-1),n&&!r&&(i=1)):"string"==typeof r&&(i=r.localeCompare(n)),"up"==e.sortDirection&&(i*=-1),i}))}},methods:{submitUsers:function(e){var t=this;if(e.preventDefault&&e.preventDefault(),this.status="",this.statusClass="",0!==this.selectedUsers.length)ie.adminPost(this.propName,this.selectedUsers).then((function(e){e.data?(t.status="Successfully ".concat(t.confirmationText),t.loadUsers()):(t.statusClass="form__error",t.status="Uh oh! something went wrong")}));else{switch(this.propName){case"approved":this.status="Opps, you didn't select anyone to approve!";break;case"admin":this.status="You must have at least one admin user."}this.statusClass="form__error"}},loadUsers:function(){var e=this;ie.getAdminData(this.allUsers).then((function(t){e.users=t.data,e.selectedUsers=[],e.users.forEach((function(t){t[e.propName]&&e.selectedUsers.push(t.id)}))})).catch((function(t){401==t.response.status?e.$router.replace({path:"/shifts"}):console.log(t)}))},sortBy:function(e){e==this.sortField?this.sortDirection="down"==this.sortDirection?"up":"down":(this.sortField=e,this.sortDirection="down")},onPropChange:function(e){switch(e){case"approved":this.title="Users Awaiting Approval",this.confirmationText="approved users",this.columnName="Approved",this.allUsers=void 0;break;case"admin":this.title="Manage Admin Users",this.confirmationText="set admin users",this.columnName="Admin",this.allUsers=!0}this.status="",this.sortField=e,this.loadUsers()}},mounted:function(){this.onPropChange(this.propName)}},wt=bt,_t=(s("61ae"),Object(l["a"])(wt,vt,gt,!1,null,null,null)),yt=_t.exports,kt=[{path:"/me",name:"UserView",component:lt.UserView},{path:"/me/:id",name:"UserShiftView",component:lt.ShiftView,meta:{isUser:!0}},{path:"/shift/:id",name:"ShiftView",component:lt.ShiftView},{path:"/shifts",name:"ShiftList",component:lt.ShiftList,beforeEnter:function(e,t,s){0===Object.keys(e.query).length?s({name:"ShiftList",query:Object.assign(e.query,de.currentFilters.asQuery())}):(de.currentFilters=new oe(e.query),s())}},{path:"/shifts/new",name:"ShiftForm",component:lt.ShiftForm},{path:"/login",name:"Login",component:lt.Login,meta:{skipAuth:!0},beforeEnter:function(e,t,s){de.loginIndex=0,s()}},{path:"/signup",name:"Signup",component:lt.Login,meta:{skipAuth:!0},beforeEnter:function(e,t,s){de.loginIndex=1,s()}},{path:"/admin/login",name:"AdminLogin",component:lt.Login,meta:{skipAuth:!0},props:{isAdmin:!0},beforeEnter:function(e,t,s){de.loginIndex=0,s()}},{path:"/admin/approve",name:"AdminApproval",component:yt,props:{propName:"approved"}},{path:"/admin/admins",name:"AdminManagement",component:yt,props:{propName:"admin"}}],St=new pt["a"]({mode:"history",base:"/",routes:kt,scrollBehavior:function(e,t,s){return s||{x:0,y:0}}});St.beforeEach(function(){var e=Object(O["a"])(regeneratorRuntime.mark((function e(t,s,i){var r,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=de.isAuthed,null!==r){e.next=5;break}return e.next=4,de.testToken();case 4:r=e.sent;case 5:n=t.matched.some((function(e){return e.name&&e.name.includes("Admin")})),t.matched.some((function(e){return!e.meta.skipAuth==r}))?i():r?(a=n?{name:"AdminApproval"}:{name:"ShiftList",query:de.currentFilters.asQuery()},i(a)):i({name:n?"AdminLogin":"Login"});case 7:case"end":return e.stop()}}),e)})));return function(t,s,i){return e.apply(this,arguments)}}());var xt=St;F(i["a"]),i["a"].use(pt["a"]),i["a"].use(Ee),new i["a"]({methods:{openUrl:function(){}},router:xt,render:function(e){return e(mt)}}).$mount("#app")},d31b:function(e,t,s){"use strict";var i=s("8b36"),r=s.n(i);r.a},ea45:function(e,t,s){},edbd:function(e,t,s){"use strict";var i=s("64dc"),r=s.n(i);r.a},f156:function(e,t,s){}});
//# sourceMappingURL=app.983de986.js.map