(function(t){function e(e){for(var i,a,o=e[0],u=e[1],c=e[2],f=0,d=[];f<o.length;f++)a=o[f],n[a]&&d.push(n[a][0]),n[a]=0;for(i in u)Object.prototype.hasOwnProperty.call(u,i)&&(t[i]=u[i]);l&&l(e);while(d.length)d.shift()();return r.push.apply(r,c||[]),s()}function s(){for(var t,e=0;e<r.length;e++){for(var s=r[e],i=!0,o=1;o<s.length;o++){var u=s[o];0!==n[u]&&(i=!1)}i&&(r.splice(e--,1),t=a(a.s=s[0]))}return t}var i={},n={app:0},r=[];function a(e){if(i[e])return i[e].exports;var s=i[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=t,a.c=i,a.d=function(t,e,s){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(s,i,function(e){return t[e]}.bind(null,i));return s},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var l=u;r.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("cd49")},"0055":function(t,e,s){"use strict";var i=s("bb72"),n=s.n(i);n.a},"048b":function(t,e,s){},"18da":function(t,e,s){"use strict";var i=s("6b6f"),n=s.n(i);n.a},"1ba1":function(t,e,s){"use strict";var i=s("ab1d"),n=s.n(i);n.a},"1cde":function(t,e,s){},"38d0":function(t,e,s){},"3ba3":function(t,e,s){},6018:function(t,e,s){"use strict";var i=s("b202"),n=s.n(i);n.a},"61ae":function(t,e,s){"use strict";var i=s("1cde"),n=s.n(i);n.a},"64dc":function(t,e,s){},"6b6f":function(t,e,s){},7511:function(t,e,s){},8110:function(t,e,s){"use strict";var i=s("3ba3"),n=s.n(i);n.a},"8b36":function(t,e,s){},9804:function(t,e,s){"use strict";var i=s("9a27"),n=s.n(i);n.a},"9a27":function(t,e,s){},"9a90":function(t,e,s){"use strict";var i=s("7511"),n=s.n(i);n.a},"9d64":function(t,e,s){t.exports=s.p+"assets/logo1cbf7568.png"},"9f26":function(t,e,s){},ab1d:function(t,e,s){},adf3:function(t,e,s){"use strict";var i=s("048b"),n=s.n(i);n.a},b202:function(t,e,s){},bb72:function(t,e,s){},c730:function(t,e,s){"use strict";var i=s("38d0"),n=s.n(i);n.a},cd49:function(t,e,s){"use strict";s.r(e);var i=s("2b0e"),n=s("4380"),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("datetime",t._b({ref:"timepicker",attrs:{type:t.type,"value-zone":"local","use12-hour":!0,"minute-step":30,format:t.format,title:t.timeTitle},on:{focus:t.listenForTimeChanges,close:t.stopListening},model:{value:t.mask,callback:function(e){t.mask=e},expression:"mask"}},"datetime",t.bind,!1))},a=[],o={props:["type","value","bind"],data:function(){return{timeWatcher:null,timeTitle:void 0}},computed:{format:function(){return"date"==this.type?"EEEE M/d/yy":"h:mm a"},mask:{get:function(){return this.value.toISOString()},set:function(t){var e=new Date(t);this.$emit("input",e)}}},methods:{onDateTimeSelected:function(t){this.$emit("input",t.value)},listenForTimeChanges:function(){var t=this;"date"!=this.type&&this.$nextTick((function(){t.timeWatcher=t.$watch((function(){return t.$refs.timepicker.$children[0].$children[0].newDatetime}),(function(e){t.timeTitle=e.toFormat(t.format)}),{immediate:!0,deep:!0})}))},stopListening:function(){this.timeWatcher&&this.timeWatcher()}}},u=o,c=s("2877"),l=Object(c["a"])(u,r,a,!1,null,null,null),f=l.exports,d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal-container",attrs:{"focus-trap":"true"},on:{click:t.clickOutside}},[s("div",{staticClass:"ns-modal emsa-modal"},[t._t("default")],2)])},h=[],m={methods:{clickOutside:function(t){t.target==this.$el&&this.$parent.$close(null)}}},p=m,v=(s("9804"),Object(c["a"])(p,d,h,!1,null,null,null)),g=v.exports,b=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("router-link",{staticClass:"button cta--is-round cta--is-back fas fa-angle-left",attrs:{to:t.to,"aria-label":"back"}})},_=[],w={props:{to:{default:function(){return{name:"ShiftList"}}}}},y=w,S=Object(c["a"])(y,b,_,!1,null,null,null),C=S.exports;function k(t){t.use(n["b"]),t.component("DateInput",f),t.component("ModalContainer",g),t.component("BackButton",C)}var x=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"emsa-root"},[s("header",[s("TabMenu",{attrs:{"current-route":t.currentRoute},on:{route:t.setCurrentPage}})],1),s("main",[s("div",{staticClass:"notification text-center"},[t._v(t._s(t.notification))]),s("router-view",t._g({staticClass:"emsa-page"},t.currentPageListeners))],1),s("dialogs-wrapper")],1)},F=[],L=(s("b0c0"),s("d3b7"),s("96cf"),s("c964")),P=s("f3f3"),A=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"side-padded"},[s("back-button"),s("h1",{staticClass:"h1 text-center"},[t._v("List a Shift")]),s("form",{staticClass:"form",attrs:{novalidate:""},on:{submit:t.submitForm}},[t._l(t.fields,(function(e){return s("div",{key:e.fieldName,staticClass:"form-field"},[s("label",{staticClass:"form-field__label",attrs:{for:e.fieldName}},[t._v(t._s(e.label))]),"radio"==e.inputType?s("div",{attrs:{role:"radiogroup"}},t._l(e.values,(function(i){return s("span",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.shift[e.fieldName],expression:"shift[f.fieldName]"}],attrs:{type:"radio",id:e.fieldName+"-"+i},domProps:{value:i.value,checked:t._q(t.shift[e.fieldName],i.value)},on:{change:function(s){return t.$set(t.shift,e.fieldName,i.value)}}}),s("label",{attrs:{for:e.fieldName+"-"+i}},[t._v(t._s(i.label))])])})),0):s("div",["date"==e.inputType||"time"==e.inputType?s("date-input",{attrs:{type:e.inputType},model:{value:t.shift[e.fieldName],callback:function(s){t.$set(t.shift,e.fieldName,s)},expression:"shift[f.fieldName]"}}):"textarea"==e.inputType?s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.shift[e.fieldName],expression:"shift[f.fieldName]"}],domProps:{value:t.shift[e.fieldName]},on:{input:function(s){s.target.composing||t.$set(t.shift,e.fieldName,s.target.value)}}}):"checkbox"===e.inputType?s("input",{directives:[{name:"model",rawName:"v-model",value:t.shift[e.fieldName],expression:"shift[f.fieldName]"}],attrs:{id:e.fieldName,type:"checkbox"},domProps:{checked:Array.isArray(t.shift[e.fieldName])?t._i(t.shift[e.fieldName],null)>-1:t.shift[e.fieldName]},on:{change:function(s){var i=t.shift[e.fieldName],n=s.target,r=!!n.checked;if(Array.isArray(i)){var a=null,o=t._i(i,a);n.checked?o<0&&t.$set(t.shift,e.fieldName,i.concat([a])):o>-1&&t.$set(t.shift,e.fieldName,i.slice(0,o).concat(i.slice(o+1)))}else t.$set(t.shift,e.fieldName,r)}}}):"radio"===e.inputType?s("input",{directives:[{name:"model",rawName:"v-model",value:t.shift[e.fieldName],expression:"shift[f.fieldName]"}],attrs:{id:e.fieldName,type:"radio"},domProps:{checked:t._q(t.shift[e.fieldName],null)},on:{change:function(s){return t.$set(t.shift,e.fieldName,null)}}}):s("input",{directives:[{name:"model",rawName:"v-model",value:t.shift[e.fieldName],expression:"shift[f.fieldName]"}],attrs:{id:e.fieldName,type:e.inputType},domProps:{value:t.shift[e.fieldName]},on:{input:function(s){s.target.composing||t.$set(t.shift,e.fieldName,s.target.value)}}})],1)])})),t._m(0)],2)],1)},O=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"text-center"},[s("input",{staticClass:"button",attrs:{type:"submit"}})])}],T=(s("4160"),s("d81d"),s("159b"),s("ddb0"),s("ac1f"),s("1276"),s("276c")),E=function t(e){Object(T["a"])(this,t),this.shift_date=new Date,this.shift_start=new Date((new Date).setHours(10,0,0,0)),this.shift_end=new Date((new Date).setHours(22,0,0,0)),this.is_offering=!0,Object.assign(this,e),this.shift_date=N(this.shift_date),this.shift_start=new Date(this.shift_start),this.shift_end=new Date(this.shift_end)};function N(t){if(t instanceof Date)return t;var e=new Date;if(t){var s=t.split("-").map((function(t){return parseInt(t)}));e.setFullYear(s[0],s[1]-1,s[2])}return e}s("b64b");var $=s("e954"),U=(s("c975"),s("25f0"),function(){function t(e){Object(T["a"])(this,t),this.trueValue=e[0],this.falseValue=e[1]}return Object($["a"])(t,[{key:"convertFrom",value:function(t){return t?this.trueValue:this.falseValue}},{key:"convertTo",value:function(t){return t==this.trueValue}}]),t}()),M=function(){function t(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;Object(T["a"])(this,t),this.values=e,this.offset=s,this.notFound=i}return Object($["a"])(t,[{key:"convertFrom",value:function(t){return t-this.offset<0?this.notFound:this.values[t-this.offset]}},{key:"convertTo",value:function(t){return this.values.indexOf(t)+this.offset}}]),t}(),j=function(){function t(){Object(T["a"])(this,t)}return Object($["a"])(t,[{key:"convertFrom",value:function(t){return t&&t.toString()}},{key:"convertTo",value:function(t){return t}}]),t}(),D={},R=function(){function t(e){Object(T["a"])(this,t),this.shift=e}return Object($["a"])(t,[{key:"getFieldInputType",value:function(t){return D[t].input_type||"text"}},{key:"getFieldLabelForContext",value:function(t,e){var s=D[t];if(s){var i=e?s.alt_input_label_conditions:s.alt_filter_label_conditions,n=!1;if(i)for(var r=0;r<i.length;r++){var a=i[r];"OR"==a.logic||0==r?n=n||this.testFieldCondition(a):"AND"==a.logic&&(n=n&&this.testFieldCondition(a))}return n?e?s.alt_input_label:s.alt_filter_label:e?s.input_label:s.filter_label}}},{key:"getFieldLabel",value:function(t){return this.getFieldLabelForContext(t,!0)}},{key:"getFieldFilterName",value:function(t){return this.getFieldLabelForContext(t,!1)}},{key:"testFieldCondition",value:function(t){if(void 0!==t.exists){var e=void 0!=this.shift;return e===t.exists}if(t.field){var s=this.shift[t.field];if(!t.value.length)return s==t.value;for(var i=0;i<t.value.length;i++)if(t.value[i]==s)return!0}return!1}},{key:"getFieldValueLabels",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=D[t];return!e&&s.input_value_labels?s.input_value_labels:s.value_labels}},{key:"getFieldValueConverter",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=this.getFieldValueLabels(t,e);if(s)switch(D[t].field_type){case"boolean":return new U(s);case"integer":return new M(s);default:return new j}}},{key:"getFieldValueName",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.getFieldFilterName(t)){var s=this.shift[t],i=this.getFieldValueConverter(t,e);return i?i.convertFrom(s):s}}}],[{key:"setFieldConfig",value:function(t){D=t}},{key:"annotatedFields",get:function(){return Object.keys(D)}},{key:"fieldConfigs",get:function(){return D}}]),t}(),I=(s("99af"),s("bc3a")),V=s.n(I),q={clearAllOnFirstRun:function(){},saveAuthToken:function(){},getAuthToken:function(){return"token"},saveState:function(){return!0},getState:function(){return{}},logout:function(){return!0},isAuthed:function(){return!0}},B=q,Y=s("4328"),K=s.n(Y),W=(Object({NODE_ENV:"production",VUE_APP_PLATFORM:"web",VUE_APP_MODE:"web",VUE_APP_API_URL:"https://shifts-api.austinemsa.org",BASE_URL:"/"}).VUE_APP_SANDBOX?Object({NODE_ENV:"production",VUE_APP_PLATFORM:"web",VUE_APP_MODE:"web",VUE_APP_API_URL:"https://shifts-api.austinemsa.org",BASE_URL:"/"}).VUE_APP_SANDBOX_URL:"https://shifts-api.austinemsa.org")||"https://emsa-shift-request-backend.herokuapp.com";function z(t){var e=t.getTimezoneOffset()/60,s=e<0?"+":"-";return"".concat(Object(n["a"])(t,"YYYY-MM-DDTHH:mm:ss")).concat(s).concat(Math.abs(e),"00")}function J(t){return K.a.stringify(t,{arrayFormat:"brackets",serializeDate:z})}var H,G=V.a.create({baseURL:W,withCredentials:!0,transformRequest:[J],paramsSerializer:J});function Q(t){return{}}function X(t){return function(e){console.log(JSON.stringify(e)),"function"==typeof t&&t(e)}}G.defaults.headers["Api-Version"]="v2.1";var Z={signup:function(t){return new Promise((function(e,s){G.post("/signup",{user:t}).then(e).catch(X(s))}))},login:function(t){return new Promise((function(e,s){G.post("/oauth/token",Object(P["a"])(Object(P["a"])({},t),{},{grant_type:"password",scope:"web"})).then(Z.onLogin(e)).catch(X(s))}))},onLogin:function(t){return function(e){H=e.data.access_token,B.saveAuthToken(H),t()}},logout:function(){return G.post("/oauth/revoke")},getConfig:function(){return G.get("/shifts/config",{headers:Q()})},getShifts:function(t,e,s){return G.get("/shifts",{params:t,headers:Q()}).then((function(t){var s=t.data.sort((function(t,e){var s=new Date(t.shift_date).getTime()-new Date(e.shift_date).getTime();return 0==s&&(s=new Date(t.shift_start).getTime()-new Date(e.shift_start).getTime()),s}));e&&e(s)})).catch((function(t){console.log(t),s&&s(t)}))},submitShift:function(t){return G.post("/shifts",{shift:t},{headers:Q()})},getShift:function(t){return new Promise((function(e,s){G.get("/shifts/".concat(t)).then((function(t){e(t.data)})).catch(s)}))},deleteShift:function(t){return G.delete("/shifts/".concat(t.id),{headers:Q()})},getSpreadsheet:function(t){return new Promise((function(e,s){G.get("/".concat(t),{headers:Q()}).then((function(t){return e(t.data)}))}))},testToken:function(){return new Promise((function(t){var e=B.getAuthToken();e||t(!1),G.get("/oauth/token/info",{headers:Q()}).then((function(e){return t(e)})).catch((function(){return t(!1)}))}))},getAdminData:function(t){return G.get("/users",{params:{all:t}})},adminPost:function(t,e){return G.post("/bulk_".concat(t),{user_ids:e})},getCodesCount:function(){return new Promise((function(t,e){G.get("/codes/count").then((function(e){t(e.data)})).catch(e)}))},submitCodes:function(t){return G.post("/codes/upload",{codes:t})},getUserCodes:function(){return G.get("/codes")},requestCode:function(){return G.post("/codes")},requestReset:function(t){return G.post("/password",{user:t})},submitReset:function(t){return new Promise((function(e,s){G.put("/password",{user:t}).then(e).catch(X(s))}))},requestConfirmation:function(t){return G.post("/confirmation",{user:t})},submitConfirmation:function(t){return new Promise((function(e,s){G.get("/confirmation?confirmation_token=".concat(t,"&scope=").concat("web")).then(Z.onLogin(e)).catch(X(s))}))}},tt=Z;s("caad"),s("4de4");function et(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return t};return t?t instanceof Array?t.map((function(t){return e(t)})):[e(t)]:[]}function st(t){return"boolean"==typeof t?t:"true"==t.toLowerCase()}function it(t){"string"!=typeof t||isNaN(parseInt(t))||(t=parseInt(t));var e=new Date(t);return isNaN(e.getTime())?new Date:e}var nt,rt,at,ot,ut=function(){function t(){var e=this,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(T["a"])(this,t);var i=R.fieldConfigs;this.date_type=s.date_type||"After",this.date=et(s.date||[new Date],it),"Before"!=this.date_type&&this.date[0]<new Date&&(this.date[0]=new Date),t.checkboxFields.forEach((function(t){var n;switch(i[t].field_type){case"integer":n=parseInt;break;case"boolean":n=st;break}e[t]=et(s[t],n)}))}return Object($["a"])(t,[{key:"asQuery",value:function(){var t=this,e={};return this.sortedKeys.forEach((function(s){if("date"==s)e[s]=t[s].map((function(t){return t.getTime().toString()}));else if("date_type"==s)e[s]=t[s];else{var i=t[s];i instanceof Array&&i.length>0&&(e[s]=i.map((function(t){return t.toString()})))}})),e}},{key:"equals",value:function(t){return JSON.stringify(this,this.sortedKeys)==JSON.stringify(t,this.sortedKeys)}},{key:"sortedKeys",get:function(){return Object.keys(this).sort()}}],[{key:"checkboxFields",get:function(){var t=R.fieldConfigs;return R.annotatedFields.filter((function(e){return t[e]&&t[e].value_labels}))}}]),t}(),ct=function(){function t(){Object(T["a"])(this,t),this.state={selectedShift:null,scrollIndex:0,currentList:[],userList:[],loginIndex:0,currentFilters:new ut,isAuthed:null,isAdmin:!1,config:{}}}return Object($["a"])(t,[{key:"testToken",value:function(){var t=Object(L["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,tt.testToken();case 2:return e=t.sent,!1===e?this.isAuthed=!1:(this.state.isAuthed=!0,this.state.isAdmin=e.data.admin,this.saveState()),t.abrupt("return",this.isAuthed);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getConfig",value:function(){var t=Object(L["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,tt.getConfig();case 3:return e=t.sent,this.state.config=e.data.config,R.setFieldConfig(e.data.fields),this.saveState(),t.abrupt("return",!0);case 10:return t.prev=10,t.t0=t["catch"](0),console.log(t.t0),t.abrupt("return",!1);case 14:case"end":return t.stop()}}),t,this,[[0,10]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"logout",value:function(){var t=this;return new Promise((function(e){tt.logout().then((function(){B.logout(),t.state.isAuthed=!1,t.clearState(),e(!0)})).catch((function(t){console.log(t),e(!1)}))}))}},{key:"saveState",value:function(){return this.saveStateMethod&&this.saveStateMethod()}},{key:"reviveState",value:function(t){t&&!t.noState||(t={}),Object.assign(this.state,t),this.state.currentFilters=new ut(t.currentFilters)}},{key:"loadList",value:function(t){var e=this;return tt.getShifts(this.state.currentFilters,(function(s){e.currentList=s,e.onListSuccess&&e.onListSuccess(),"function"==typeof t&&t()}),(function(t){t.response&&e.onListError&&[401,403].includes(t.response.status)&&e.onListError(t)}))}},{key:"clearState",value:function(){this.state.selectedShift=null,this.state.scrollIndex=0,this.state.currentList=[],this.state.currentFilters=new ut,this.saveState()}},{key:"selectedShift",get:function(){return this.state.selectedShift},set:function(t){this.state.selectedShift=t?new E(t):null,this.saveState()}},{key:"scrollIndex",get:function(){return this.state.scrollIndex},set:function(t){this.state.scrollIndex=t,this.saveState()}},{key:"currentList",get:function(){return this.state.currentList},set:function(t){t=t.map((function(t){return new E(t)})),this.state.currentList=t.sort((function(t,e){var s=t.shift_date.valueOf()-e.shift_date.valueOf();return 0==s&&(s=t.shift_start.valueOf()-e.shift_start.valueOf()),s})),this.saveState()}},{key:"currentFilters",get:function(){return this.state.currentFilters},set:function(t){t&&!this.currentFilters.equals(t)&&(this.state.currentFilters=t,this.saveState())}},{key:"userList",get:function(){return this.state.userList},set:function(t){this.state.userList=t}},{key:"loginIndex",get:function(){return this.state.loginIndex},set:function(t){this.state.loginIndex=t,this.saveState()}},{key:"isAuthed",get:function(){return this.state.isAuthed},set:function(t){this.state.isAuthed=t,this.saveState()}},{key:"isAdmin",get:function(){return this.state.isAdmin}}]),t}(),lt=new ct,ft=lt,dt=i["a"].extend({data:function(){return{store:ft}},mounted:function(){var t=this;this.$nextTick((function(){t.$emit("pageMounted")}))}}),ht={name:"ShiftForm",mixins:[dt],data:function(){var t=new E,e={},s=new R(t);return R.annotatedFields.forEach((function(i){var n=s.getFieldInputType(i);e[i]={inputType:n};var r=s.getFieldValueLabels(i);if(r){var a=s.getFieldValueConverter(i);e[i].values=r.map((function(t){return{label:t,value:a?a.convertTo(t):t}})),t[i]=e[i].values[0].value}})),{shift:t,valueManager:e,viewModel:s}},computed:{fields:function(){var t=this,e=[];return R.annotatedFields.forEach((function(s){var i=t.viewModel.getFieldLabel(s);if(i){var n=t.valueManager[s]||{};e.push({label:i,inputType:n.inputType,values:n.values,fieldName:s})}})),e}},methods:{submitForm:function(t){var e=this;t.preventDefault&&t.preventDefault(),console.log("submitting shift: ",this.shift),tt.submitShift(this.shift).then(Object(L["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,alert("Successfully saved!");case 2:e.$emit("back");case 3:case"end":return t.stop()}}),t)})))).catch((function(t){console.log(t)}))}}},mt=ht,pt=Object(c["a"])(mt,A,O,!1,null,"3fe39376",null),vt=pt.exports,gt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"side-padded"},[s("div",{staticClass:"text-center filter-button"},[s("button",{staticClass:"button",on:{click:t.showFiltersModal}},[t._v("Filters")])]),0==t.store.currentList.length?s("p",[t._v("There are currently no posts that match your search criteria. Please check back again soon, or make your own post seeking a swap")]):t._e(),s("ul",t._l(t.store.currentList,(function(t,e){return s("ShiftListItem",{key:e,attrs:{shift:t}})})),1)])},bt=[],_t=(s("5319"),i["a"].extend({data:function(){return{forList:!0,displayFields:R.annotatedFields.filter((function(t){return R.fieldConfigs[t].display_in_list}))}},computed:{dateFormatFilter:function(){return this.$options.filters&&this.$options.filters.dateFormat},dateString:function(){if(void 0===this.dateFormatFilter)return"";var t=this.displayedShift.shift_date,e=t.getFullYear()==(new Date).getFullYear(),s=e?"dddd, M/DD":"dddd, M/DD/YY";return this.dateFormatFilter(t,s)},timeString:function(){if(void 0===this.dateFormatFilter)return"";var t=this.dateFormatFilter(new Date(this.displayedShift.shift_start),"h:mm a"),e=this.dateFormatFilter(new Date(this.displayedShift.shift_end),"h:mm a");return"".concat(t,"-").concat(e)},valueLabels:function(){var t={date:this.dateString,time:this.timeString,dateTime:"".concat(this.dateString," ").concat(this.timeString)},e=this;return e.displayFields.forEach((function(s){t[s]=e.viewModel.getFieldValueName(s,e.forList)})),t},givenShift:function(){0},displayedShift:function(){return new E(this.givenShift)},viewModel:function(){return new R(this.displayedShift)}}})),wt={name:"ShiftListItem",mixins:[_t],props:["shift","isUser"],data:function(){return{rows:[]}},computed:{givenShift:function(){return this.shift}},created:function(){var t=[],e=R.fieldConfigs;this.displayFields.forEach((function(s){var i=e[s];if(i.display_in_list){var n=t[i.list_row]||[];n[i.list_column]=s,t[i.list_row]=n}}));for(var s=0;s<t.length;s++)if(void 0===t[s]){t[s]=["dateTime"];break}this.rows=t},render:function(){var t=this,e=arguments[0];if(!this.valueLabels.is_offering)return"";var s="shift-item shift-item--is-".concat(this.valueLabels.is_offering.toLowerCase()),i=!1,n=this.rows.map((function(s,n){var r=s.map((function(n,r){var a=t.valueLabels[n],o="shift-item__".concat(n.replace("_","-"));return s.length>1&&(0==r&&(o+=" shift-item--is-first-in-row"),r==s.length-1&&(o+=" shift-item--is-last-in-row")),i?e("Label",{attrs:{text:a,flexGrow:"1"},class:o}):e("span",{class:o},[a])})),a="shift-item__row-".concat(n," shift-item__row");return i?e("FlexboxLayout",{attrs:{flexWrap:"noWrap",justifyContent:"space-between"},class:a},[" ",r," "]):e("div",{class:a},[" ",r," "])}));return i?e("StackLayout",{class:s},[n]):e("li",{class:s},[e("router-link",{attrs:{to:{name:this.isUser?"UserShiftView":"ShiftView",params:{id:this.displayedShift.id}}}},[n])])}},yt=wt,St=(s("1ba1"),s("0055"),Object(c["a"])(yt,nt,rt,!1,null,"8932b344",null)),Ct=St.exports,kt=dt.extend({name:"ShiftList",components:{ShiftListItem:Ct},data:function(){return{dataIsLoading:!1}},methods:{getShifts:function(t){var e=this,s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2?arguments[2]:void 0;this.dataIsLoading=s,this.store.currentFilters=t,this.store.loadList((function(){e.dataIsLoading=!1,"function"==typeof i&&i()}))},onPullToRefresh:function(t){var e=this;this.$nextTick((function(){e.getShifts(e.store.currentFilters,!1,(function(){return e.notifyPullToRefreshFinished(t)}))}))},showFiltersModal:function(){var t=Object(L["a"])(regeneratorRuntime.mark((function t(){var e,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={props:{filters:this.store.currentFilters}},t.next=3,this.showModal(e);case 3:if(s=t.sent,s&&!this.store.currentFilters.equals(s)){t.next=6;break}return t.abrupt("return");case 6:this.getShifts(s),this.onNewFilters(s);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),showModal:function(t){return new Promise((function(t){return t()}))},onNewFilters:function(t){},notifyPullToRefreshFinished:function(t){},scrollListToIndex:function(t){},onScroll:function(t){this.store.scrollIndex=t}},mounted:function(){var t=this;0===this.store.currentList.length?this.getShifts(this.store.currentFilters,!0,(function(){t.scrollListToIndex(t.store.scrollIndex)})):this.$nextTick((function(){t.scrollListToIndex(t.store.scrollIndex)}))}}),xt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("modal-container",{staticClass:"filter-form"},[s("div",[s("button",{staticClass:"button ns-modal__close-button cta--is-round cta--is-close fas fa-times",attrs:{"aria-label":"close"},on:{click:function(e){return t.$close(null)}}}),s("h1",{staticClass:"filter-form__header"},[t._v("Filter Shift Results")]),s("fieldset",{staticClass:"filter-group"},[s("label",{staticClass:"filter-group__group-label"},[t._v("Dates")]),s("div",[s("select",{directives:[{name:"model",rawName:"v-model",value:t.filterModel.dateType,expression:"filterModel.dateType"}],attrs:{name:"dateType",id:"date-type","aria-label":"Date filter type"},on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filterModel,"dateType",e.target.multiple?s:s[0])},t.onDateTypeChange]}},t._l(t.dateTypes,(function(e){return s("option",{domProps:{value:e}},[t._v(t._s(e))])})),0),s("date-input",{attrs:{bind:{minDate:t.today},type:"date"},model:{value:t.filterModel.date[0],callback:function(e){t.$set(t.filterModel.date,0,e)},expression:"filterModel.date[0]"}}),"Between"==t.filterModel.dateType?s("date-input",{attrs:{bind:{minDate:t.filterModel.date[0]},type:"date"},model:{value:t.filterModel.date[1],callback:function(e){t.$set(t.filterModel.date,1,e)},expression:"filterModel.date[1]"}}):t._e()],1)]),t._l(t.checkboxFields,(function(e){return s("shift-filter-group",{key:e,attrs:{"filter-key":e},model:{value:t.filterModel[e],callback:function(s){t.$set(t.filterModel,e,s)},expression:"filterModel[filterKey]"}})})),s("div",{staticClass:"text-center"},[s("button",{staticClass:"button",on:{click:function(e){return t.$close(t.filterModel)}}},[t._v("Done")])])],2)])},Ft=[],Lt=(s("fb6a"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("fieldset",{staticClass:"filter-group"},[s("legend",{staticClass:"filter-group__group-label"},[t._v(t._s(t.label))]),s("div",{staticClass:"filter-group__items"},t._l(t.boxes,(function(e,i){return s("span",{key:e},[s("input",{attrs:{id:t.filterKey+"-"+e,type:"checkbox"},domProps:{checked:t.checks[i]},on:{change:function(e){return t.updateValue(e,i)}}}),s("label",{attrs:{for:t.filterKey+"-"+e}},[t._v(t._s(e))])])})),0)])}),Pt=[],At=(s("a434"),{props:{value:Array,filterKey:String},data:function(){var t=new R(null);return{viewModel:t,converter:t.getFieldValueConverter(this.filterKey,!0),label:t.getFieldFilterName(this.filterKey),boxes:t.getFieldValueLabels(this.filterKey,!0)}},computed:{checks:function(){var t=this;return this.boxes.map((function(e){var s=t.converter?t.converter.convertTo(e):e;return t.value.indexOf(s)>=0}))}},methods:{updateValue:function(t,e){var s=this.value.slice(),i=t.target?t.target.checked:t.value;if(i!=this.checks[e]){var n=this.converter.convertTo(this.boxes[e]),r=this.value.indexOf(n);i&&r<0?s.push(n):!i&&r>=0&&s.splice(r,1),this.$emit("input",s.sort())}}}}),Ot=At,Tt=(s("18da"),Object(c["a"])(Ot,Lt,Pt,!1,null,null,null)),Et=Tt.exports,Nt={components:{ShiftFilterGroup:Et},props:{filters:Object},data:function(){var t=new R;return{filterModel:new ut(this.filters),checkboxFields:ut.checkboxFields,viewModel:t,dateTypes:["On","Before","After","Between"],today:new Date}},methods:{onDateTypeChange:function(t){if(this.filterModel.dateType=t.object?t.object.selectedValue:t.target.value,"Between"==this.filterModel.dateType){var e=this.filterModel.date[0];this.filterModel.date=[e,e]}else this.filterModel.date=this.filterModel.date.slice(0,1)},onDateChanged:function(t,e){this.filterModel.date[e]=t.value}}},$t=Nt,Ut=(s("6018"),Object(c["a"])($t,xt,Ft,!1,null,null,null)),Mt=Ut.exports,jt=s("9935"),Dt=Object(jt["create"])(Mt),Rt={name:"ShiftList",mixins:[kt],methods:{showModal:function(t){return Dt(Object(P["a"])({},t.props))},onNewFilters:function(t){this.$router.push({name:"ShiftList",query:t.asQuery()})}}},It=Rt,Vt=(s("d31b"),Object(c["a"])(It,gt,bt,!1,null,"2af6cac8",null)),qt=Vt.exports,Bt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"side-padded"},[s("back-button",{attrs:{to:t.backPage}}),s("h1",{staticClass:"h1 text-center"},[t._v(t._s(t.valueLabels.is_offering)+" Shift")]),s("h2",{staticClass:"h2 text-center"},[t._v(t._s(t.valueLabels.date))]),s("h2",{staticClass:"h2 text-center"},[t._v(t._s(t.valueLabels.time))]),s("table",{staticClass:"shift-view"},t._l(t.listedFields,(function(e){return s("tr",{key:e},[s("td",{staticClass:"shift-view__label"},[t._v(t._s(t.fieldLabels[e]))]),s("td",{staticClass:"shift-view__value"},[t._v(t._s(t.valueLabels[e]))])])})),0),s("div",{staticClass:"text-center"},[t.displayedShift.isUser?s("button",{staticClass:"button cta",on:{click:t.deletePost}},[t._v("Delete This Post")]):s("a",{staticClass:"button cta",attrs:{href:t.shiftEmail,target:"_blank"}},[t._v("Email This Poster")])])],1)},Yt=[],Kt=(s("7db0"),s("466d"),/(shift_date|shift_start|shift_end)/),Wt={name:"ShiftView",mixins:[_t,dt],data:function(){return{displayFields:R.annotatedFields.filter((function(t){return!t.match(Kt)})),listedFields:[],rowSpec:[],fieldLabels:{}}},computed:{givenShift:function(){return this.store.selectedShift},shiftEmail:function(){if(this.displayedShift.isUser)return"";var t="".concat(this.valueLabels.position," ").concat(this.valueLabels.is_field," ").concat(this.valueLabels.is_ocp," on ").concat(this.dateString.split(", ")[1]);return"mailto:".concat(this.displayedShift.email,"?subject=").concat(encodeURI(t),"&body=%0A%0A").concat(encodeURI(this.store.state.config.email_warning))},backPage:function(){return{name:this.displayedShift.isUser?"UserView":"ShiftList"}}},methods:{goBack:function(){this.$emit("back")},openEmail:function(){this.$root.openUrl(this.shiftEmail)},deletePost:function(){var t=this;tt.deleteShift(this.displayedShift).then(Object(L["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,alert("Successfully deleted!");case 2:t.$router?t.$router.push(t.backPage):t.$emit("back");case 3:case"end":return e.stop()}}),e)})))).catch((function(t){console.log(t)}))}},beforeRouteEnter:function(){var t=Object(L["a"])(regeneratorRuntime.mark((function t(e,s,i){var n,r,a,o,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.meta.isUser,r=n?ft.userList:ft.currentList,t.prev=2,!r.length){t.next=7;break}a=r.find((function(t){return t.id==e.params.id})),t.next=11;break;case 7:return t.next=9,tt.getShift(e.params.id);case 9:o=t.sent,a=new E(o);case 11:a.isUser=n,ft.selectedShift=a,i(),t.next=21;break;case 16:return t.prev=16,t.t0=t["catch"](2),u=s.name?s:{name:n?"UserView":"ShiftList"},i(u),t.abrupt("return");case 21:case"end":return t.stop()}}),t,null,[[2,16]])})));function e(e,s,i){return t.apply(this,arguments)}return e}(),beforeRouteLeave:function(t,e,s){ft.selectedShift=null,s()},created:function(){for(var t=0;t<this.displayFields.length;t++){var e=this.displayFields[t];if("is_offering"!=e){var s=this.viewModel.getFieldFilterName(e);s&&(this.listedFields.push(e),this.fieldLabels[e]=s,this.rowSpec.push("auto"))}}}},zt=Wt,Jt=(s("f7cf"),Object(c["a"])(zt,Bt,Yt,!1,null,"ebbaf118",null)),Ht=Jt.exports,Gt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("form",{staticClass:"side-padded text-center login-form",attrs:{novalidate:""},on:{submit:t.onSubmit}},[i("img",{attrs:{src:s("9d64"),alt:"Austin EMSA Logo"}}),i("h1",{staticClass:"h1"},[t._v("Shift Request "+t._s(t.isAdmin?"Admin Panel":""))]),i("h2",{staticClass:"h2"},[t._v(t._s(t.titleText))]),i("div",{staticClass:"form__message text-center"},[t._v(t._s(t.formMessage))]),t.store.loginIndex<4?i("div",[i("div",{staticClass:"form__error text-center"},[t._v(t._s(t.formError))]),t.store.loginIndex<2?i("div",{staticClass:"form-field"},[i("label",{staticClass:"form-field__label",attrs:{for:"email"}},[t._v("Email")]),t.isLogin?t._e():i("p",{staticClass:"form-field__description"},[t._v("Reminder: Use your first.last@austintexas.gov email format")]),i("p",{staticClass:"form-field__error"},[t._v(t._s(t.fieldErrors.email&&"Email "+t.fieldErrors.email[0]))]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.user.email,expression:"user.email"}],staticClass:"form-field__input",attrs:{type:"email",id:"email",autocomplete:"email"},domProps:{value:t.user.email},on:{input:function(e){e.target.composing||t.$set(t.user,"email",e.target.value)}}})]):t._e(),i("div",{staticClass:"form-field"},[i("label",{staticClass:"form-field__label",attrs:{for:"password"}},[t._v("Password")]),i("p",{staticClass:"form-field__error"},[t._v(t._s(t.fieldErrors.password&&"Password "+t.fieldErrors.password[0]))]),"checkbox"===(t.showPassword?"text":"password")?i("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-field__input",attrs:{id:"password",type:"checkbox"},domProps:{checked:Array.isArray(t.user.password)?t._i(t.user.password,null)>-1:t.user.password},on:{change:function(e){var s=t.user.password,i=e.target,n=!!i.checked;if(Array.isArray(s)){var r=null,a=t._i(s,r);i.checked?a<0&&t.$set(t.user,"password",s.concat([r])):a>-1&&t.$set(t.user,"password",s.slice(0,a).concat(s.slice(a+1)))}else t.$set(t.user,"password",n)}}}):"radio"===(t.showPassword?"text":"password")?i("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-field__input",attrs:{id:"password",type:"radio"},domProps:{checked:t._q(t.user.password,null)},on:{change:function(e){return t.$set(t.user,"password",null)}}}):i("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-field__input",attrs:{id:"password",type:t.showPassword?"text":"password"},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}})]),t.isLogin?t._e():i("div",{staticClass:"form-field"},[i("label",{staticClass:"form-field__label",attrs:{for:"password_confirmation"}},[t._v("Confirm Password")]),i("p",{staticClass:"form-field__error"},[t._v(t._s(t.fieldErrors.password_confirmation&&"Password confrimation "+t.fieldErrors.password_confirmation[0]))]),"checkbox"===(t.showPassword?"text":"password")?i("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password_confirmation,expression:"user.password_confirmation"}],staticClass:"form-field__input",attrs:{id:"password_confirmation",type:"checkbox"},domProps:{checked:Array.isArray(t.user.password_confirmation)?t._i(t.user.password_confirmation,null)>-1:t.user.password_confirmation},on:{change:function(e){var s=t.user.password_confirmation,i=e.target,n=!!i.checked;if(Array.isArray(s)){var r=null,a=t._i(s,r);i.checked?a<0&&t.$set(t.user,"password_confirmation",s.concat([r])):a>-1&&t.$set(t.user,"password_confirmation",s.slice(0,a).concat(s.slice(a+1)))}else t.$set(t.user,"password_confirmation",n)}}}):"radio"===(t.showPassword?"text":"password")?i("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password_confirmation,expression:"user.password_confirmation"}],staticClass:"form-field__input",attrs:{id:"password_confirmation",type:"radio"},domProps:{checked:t._q(t.user.password_confirmation,null)},on:{change:function(e){return t.$set(t.user,"password_confirmation",null)}}}):i("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password_confirmation,expression:"user.password_confirmation"}],staticClass:"form-field__input",attrs:{id:"password_confirmation",type:t.showPassword?"text":"password"},domProps:{value:t.user.password_confirmation},on:{input:function(e){e.target.composing||t.$set(t.user,"password_confirmation",e.target.value)}}})]),i("button",{staticClass:"button cta--is-close",attrs:{type:"button"},on:{click:function(e){t.showPassword=!t.showPassword}}},[t._v(" "+t._s(t.showPassword?"Hide Password":"Show Password")+" ")]),i("div",{staticClass:"form__submit"},[i("input",{staticClass:"button",attrs:{type:"submit"},domProps:{value:t.submitText}})]),t.isLogin?i("div",{staticClass:"text-center additional"},[i("router-link",{staticClass:"link",attrs:{to:{name:"ForgotPassword"}}},[t._v("Forgot your password?")]),i("router-link",{staticClass:"link",attrs:{to:{name:"ConfirmEmail"}}},[t._v("Need to confirm your email?")])],1):t._e()]):t._e()])},Qt=[],Xt={name:"Login",mixins:[dt],props:{isAdmin:Boolean},data:function(){return{formError:"",formMessage:"",fieldErrors:{},isSubmitting:!1,user:{email:"",password:"",password_confirmation:"",resetPasswordToken:this.$route&&this.$route.query["reset_password_token"]},showPassword:!1}},computed:{isLogin:function(){return 0==this.store.loginIndex},passwordReturnPress:function(){return this.isLogin?this.onSubmit:function(){}},submitText:function(){return["Log In","Sign Up"][this.store.loginIndex]||"Submit"},titleText:function(){return["Log In","Sign Up","Reset Password"][this.store.loginIndex]}},methods:{onSubmit:function(t){var e,s,i=this;switch(this.formError="",this.formMessage="",this.fieldErrors={},this.isSubmitting=!0,"function"==typeof t.preventDefault&&t.preventDefault(),this.store.loginIndex){case 0:e=tt.login,s=function(){return i.$emit("authSuccess",i.isAdmin)};break;case 1:e=tt.signup,s=function(t){t.data.approved?i.loginOrCaveat("You have successfully signed up but we had a problem logging you in. Please try again from the login page."):i.showLoginCaveat("You have signed up successfully but we don't recognize your email address, so your account has not been approved by your administrator yet. We'll email you when it's time to come back and log in!")};break;case 2:e=tt.submitReset,s=function(t){i.user.email=t.data.email,i.loginOrCaveat("You have successfully reset your password, but we were unable to automatically log you in. Please go to the log in page to try again.")}}e(this.user).then(s).catch(this.onSubmitError)},showLoginCaveat:function(t){this.store.loginIndex=4,this.formMessage=t},loginOrCaveat:function(t){var e=this;tt.login(this.user).then((function(){return e.$emit("authSuccess",e.isAdmin)})).catch((function(){return e.showLoginCaveat(t)}))},onSubmitError:function(t){this.isSubmitting=!1;var e=t.response.data;console.log(e),e.message?this.formError=e.message:e.error_description?this.formError=e.error_description:this.fieldErrors=e.errors||{}}}},Zt=Xt,te=(s("c730"),Object(c["a"])(Zt,Gt,Qt,!1,null,"7f876766",null)),ee=te.exports,se=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"side-padded"},[s("back-button"),s("h1",{staticClass:"h1 text-center"},[t._v("My Account")]),s("div",{staticClass:"text-center user-view-section"},[t.store.isAdmin?s("router-link",{staticClass:"button",attrs:{to:{name:"AdminApproval"}}},[t._v("Admin Panel")]):t._e()],1),s("div",{staticClass:"user-view-section text-center"},[s("h2",{staticClass:"h2 text-center"},[t._v("My App Store Codes")]),s("p",{staticClass:"p"},[t._v("(you need one of these to download the iOS app)")]),t.appCodes.length?s("ul",{staticClass:"plain-list"},t._l(t.appCodes,(function(e){return s("li",{key:e.id},[s("a",{staticClass:"link",attrs:{href:"itms-apps://buy.itunes.apple.com/WebObjects/MZFinance.woa/wa/freeProductCodeWizard?code="+e.code}},[t._v(t._s(e.code))])])})),0):s("p",{staticClass:"p text-center"},[t._v("You don't have any app store codes")]),s("button",{staticClass:"button",on:{click:t.requestCode}},[t._v("Request a new code")])]),s("div",{staticClass:"user-view-section"},[s("h2",{staticClass:"h2 text-center"},[t._v("My Posts")]),t.shifts.length?s("ul",t._l(t.shifts,(function(t,e){return s("ShiftListItem",{key:e,attrs:{shift:t,"is-user":!0}})})),1):s("p",{staticClass:"text-center p"},[t._v("You don't have any current shifts posted. "),s("router-link",{staticClass:"link",attrs:{to:{name:"ShiftForm"}}},[t._v("Make a new post")])],1)]),s("div",{staticClass:"text-center"},[s("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(e){return t.$emit("logout")}}},[t._v("Log Out")])])],1)},ie=[],ne=(s("a9e3"),{name:"UserView",mixins:[dt],components:{ShiftListItem:Ct},data:function(){return{appCodes:[],codeStatusText:""}},props:{scrollIndex:Number},computed:{shifts:function(){return this.store.userList}},methods:{showShift:function(t){var e=this.shifts[t];e.isUser=!0,this.$emit("shiftSelected",e,!0)},getShifts:function(t){var e=this,s=function(){t&&t.object.notifyPullToRefreshFinished()};tt.getShifts({is_user:!0},(function(t){e.store.userList=t,s()}),(function(t){t.response&&401==t.response.status?e.$emit("logout"):s()}))},requestCode:function(){var t=this;this.codeStatusText="Requesting...",tt.requestCode().then((function(e){t.codeStatusText="",t.appCodes.push(e.data)})).catch((function(e){t.codeStatusText=e}))}},mounted:function(){var t=this;this.getShifts(),tt.getUserCodes().then((function(e){return t.appCodes=e.data}))}}),re=ne,ae=(s("9a90"),Object(c["a"])(re,se,ie,!1,null,"657dd5af",null)),oe=ae.exports,ue=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("form",{staticClass:"side-padded text-center login-form",attrs:{novalidate:""},on:{submit:t.onSubmit}},[i("BackButton",{on:{backPressed:function(e){return t.$emit("back")}}}),i("img",{attrs:{src:s("9d64"),alt:"Austin EMSA Logo"}}),t.submitted?t._e():i("div",[i("h1",{staticClass:"h1"},[t._v(t._s(t.title))]),i("h2",[t._v(t._s(t.text))])]),i("div",{staticClass:"form__message text-center"},[t._v(t._s(t.formMessage))]),t.submitted?t._e():i("div",[i("div",{staticClass:"form-field"},[i("label",{staticClass:"form-field__label",attrs:{for:"email"}},[t._v("Email*")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.user.email,expression:"user.email"}],staticClass:"form-field__input",attrs:{type:"text",name:"email"},domProps:{value:t.user.email},on:{input:function(e){e.target.composing||t.$set(t.user,"email",e.target.value)}}})]),t._m(0)]),t.submitted?i("div",[i("router-link",{staticClass:"button",attrs:{to:{name:"Login"}}},[t._v("Back to Login")])],1):t._e()],1)},ce=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"form__submit"},[s("input",{staticClass:"button",attrs:{type:"submit",value:"submit"}})])}],le={reset:{title:"Forgot your password?",text:"Enter your email address and we'll send you reset instructions.",success:"If your email address exists in our database, you will receive a password recovery link at your email address in a few minutes. Please note: it may take up to 10 minutes for the email to arrive.",requestFunc:tt.requestReset},confirmation:{title:"Need email confirmation instructions?",text:"Enter your email address and we'll send you a confirmation email",success:"If your email address exists in our database, you will receive an email confirmation link at your email address in a few minutes. Please note: it may take up to 10 minutes for the email to arrive.",requestFunc:tt.requestConfirmation},default:{}},fe={name:"ForgotPassword",mixins:[dt],data:function(){return{user:{email:""},formMessage:"",formError:"",submitted:!1}},props:{formType:String},computed:{formSettings:function(){return le[this.formType]||le.default},title:function(){return this.formSettings.title},text:function(){return this.formSettings.text}},methods:{onSubmit:function(t){var e=this;this.formError="",this.formMessage="","function"==typeof t.preventDefault&&t.preventDefault(),this.user.email?this.formSettings.requestFunc(this.user).then((function(){e.submitted=!0,e.formMessage=e.formSettings.success})).catch((function(t){console.log(t),e.formMessage="Something went wrong. Please try again later"})):this.formError="Please enter a valid email address"}}},de=fe,he=Object(c["a"])(de,ue,ce,!1,null,null,null),me=he.exports,pe=(s("45fc"),s("2532"),s("38cf"),s("841c"),s("498a"),s("2638")),ve=s.n(pe),ge={name:"Spreadsheet",mixins:[dt],data:function(){return{lines:[[]],search:""}},computed:{rowCount:function(){return this.lines.length},rows:function(){return this.rowCount?"*"+",*".repeat(this.rowCount-1):"*"},colCount:function(){return this.lines[0].length},cols:function(){return this.colCount?"*"+",*".repeat(this.colCount-1):"*"},filteredLines:function(){if(!this.search||0==this.search.trim().length)return this.lines;var t=this.search.toLowerCase();return this.lines.filter((function(e,s){return 0===s||e.some((function(e){return e&&e.value&&e.value.toString().toLowerCase().includes(t)}))}))}},methods:{makeSelectable:function(t){0}},created:function(){var t=Object(L["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,tt.getSpreadsheet("key_codes");case 2:e=t.sent,this.lines=JSON.parse(e.lines);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),render:function(){var t=this,e=arguments[0],s=!1,i=[];return this.colCount&&(i=this.filteredLines.map((function(i,n){var r=[];return i.forEach((function(i,a){if(i){var o;if(s)o=e("Label",{attrs:{text:i.value,col:a,row:n,textWrap:"true",rowSpan:i.rowSpan,colSpan:i.colSpan},style:i.style,class:"cell",on:{loaded:t.makeSelectable}});else{var u=0===n?"th":"td";o=e(u,{style:i.style,attrs:{colspan:i.colSpan,rowspan:i.rowspan},class:"cell"},[i.value])}r.push(o)}})),s?r:e("tr",[r])}))),s?e("ScrollView",[e("StackLayout",[e("TitleAndBackButton",{attrs:{text:"Station Codes"},on:{backPressed:function(){return t.$emit("back")}}}),e("GridLayout",{attrs:{columns:"*,auto"}},[e("TextField",{attrs:{text:this.search,colSpan:"2",col:"0"},on:{textChange:function(e){return t.search=e.value}},class:"search-field"}),e("Label",{attrs:{text:"",col:"1"},class:"fas cta--is-round"})]),e("GridLayout",{attrs:{columns:this.cols,rows:this.rows},class:"sheet"},[i])])]):e("div",{class:"side-padded"},[e("back-button"),e("h1",{class:"h1 text-center"},["Station Codes"]),e("div",{class:"search"},[e("input",ve()([{on:{input:function(e){e.target.composing||(t.search=e.target.value)}},attrs:{type:"text"},class:"search__field",domProps:{value:t.search}},{directives:[{name:"model",value:t.search,modifiers:{}}]}])),e("span",{class:"fas fa-search pull-right search__icon"})]),e("table",[i])])}},be=ge,_e=(s("adf3"),Object(c["a"])(be,at,ot,!1,null,"7da96fc2",null)),we=_e.exports,ye=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div")},Se=[],Ce={props:{onCreate:Function},created:function(){this.onCreate(this)}},ke=Ce,xe=Object(c["a"])(ke,ye,Se,!1,null,null,null),Fe=xe.exports,Le={ShiftForm:vt,ShiftList:qt,ShiftView:Ht,Login:ee,UserView:oe,ForgotPassword:me,ConfirmEmail:Object(P["a"])(Object(P["a"])({},me),{},{name:"ConfirmEmail"}),StationCodes:Object(P["a"])(Object(P["a"])({},we),{},{name:"StationCodes"}),Interstitial:Fe},Pe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("nav",[s("ul",{staticClass:"emsa-menu"},t._l(t.menuTabs,(function(e,i){return s("li",{key:i,staticClass:"emsa-menu__item",class:{"emsa-menu__item--is-selected":e.isSelected,"emsa-menu__item--is-not-selected":!e.isSelected&&i>0}},[s("router-link",{attrs:{to:e.route}},[t._v(t._s(e.title))])],1)})),0)])},Ae=[],Oe={data:function(){return{store:ft}},props:{currentRoute:String},computed:{menuTabs:function(){var t=this;if(this.currentRoute&&this.currentRoute.includes("Admin"))return"AdminLogin"==this.currentRoute?[]:[{title:"Manage Admins",route:{name:"AdminManagement"},isSelected:"AdminManagement"==this.currentRoute},{title:"Approve Users",route:{name:"AdminApproval"},isSelected:"AdminApproval"==this.currentRoute},{title:"App Codes",route:{name:"AdminCodes"},isSelected:"AdminCodes"==this.currentRoute}];if(this.store.isAuthed){var e=this.store.selectedShift;return[{title:"Post a Shift",action:function(){return t.$emit("route","ShiftForm")},isSelected:"ShiftForm"==this.currentRoute,route:{name:"ShiftForm"}},{title:"Find a Shift",action:function(){return t.$emit("route","ShiftList")},isSelected:"ShiftList"==this.currentRoute||e&&!e.isUser,route:{name:"ShiftList"}},{title:"Station Codes",action:function(){return t.$emit("route","StationCodes")},isSelected:"StationCodes"==this.currentRoute,route:{name:"StationCodes"}},{title:"My Account",action:function(){return t.$emit("route","UserView")},isSelected:"UserView"==this.currentRoute||e&&e.isUser,route:{name:"UserView"}}]}return[{title:"Returning User",action:function(){return t.store.loginIndex=0},isSelected:0==this.store.loginIndex,route:{name:"Login"}},{title:"New User",action:function(){return t.store.loginIndex=1},isSelected:this.store.loginIndex>0,route:{name:"Signup"}}]}}},Te=Oe,Ee=(s("8110"),Object(c["a"])(Te,Pe,Ae,!1,null,"2f937cae",null)),Ne=Ee.exports,$e={components:{TabMenu:Ne},data:function(){var t={store:ft,notification:""};return t},computed:{currentRoute:function(){return this.$route?this.$route.name:this.currentPage&&this.currentPage.name},currentPageListeners:function(){var t=this,e=function(){return t.setCurrentPage("ShiftList")},s={};switch(this.currentRoute){case"ShiftList":s={shiftSelected:this.onShiftSelected,listRequested:this.loadList};break;case"UserView":s={shiftSelected:this.onShiftSelected,back:e,logout:this.logout};break;case"Login":case"AdminLogin":case"Signup":case"PasswordReset":case"SubmitConfirmation":s={authSuccess:function(s){t.store.isAuthed=!0,s?t.setCurrentPage("AdminApproval"):(t.store.getConfig(),e())},authFailure:function(){t.setCurrentPage("Login")}};break;case"ShiftView":s={back:function(){var e=t.store.selectedShift.isUser?"UserView":"ShiftList";t.setCurrentPage(e)}};break;case"ForgotPassword":case"ConfirmEmail":s={back:function(){return t.setCurrentPage("Login")}};break;default:s={back:e};break}return Object(P["a"])(Object(P["a"])({},s),{},{navigate:this.setCurrentPage})}},methods:{saveState:function(){},setCurrentPage:function(t){var e="ShiftList"==t?this.store.currentFilters:{};return this.$router.push({name:t,query:e})},onShiftSelected:function(t){this.store.selectedShift=t,this.setCurrentPage("ShiftView")},loadList:function(t,e){this.store.currentFilters.equals(t)||(this.store.currentFilters=t),this.store.loadList(e)},logout:function(){var t=Object(L["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.store.logout();case 2:e=t.sent,e?(this.store.isAuthed=!1,this.setCurrentPage("Login")):this.notify("Somehow we were unable to log you out. Please try again later");case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),notify:function(t){var e=this;this.notification=t,setTimeout((function(){e.notification=""}),6e4)}},created:function(){var t=Object(L["a"])(regeneratorRuntime.mark((function t(){var e,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.store.onListError=this.logout,this.store.saveStateMethod=this.saveState,B.clearAllOnFirstRun(),t.next=10;break;case 6:e=B.getState(),this.store.reviveState(e),s=this.store.isAuthed?e.currentPage||"ShiftList":"Login",this.currentPage=this.views[s];case 10:return t.next=12,this.store.getConfig();case 12:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},Ue=$e,Me=(s("edbd"),Object(c["a"])(Ue,x,F,!1,null,null,null)),je=Me.exports,De=s("8c4f"),Re=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.users.length?s("form",{staticClass:"users-form side-padded",on:{submit:t.submitUsers}},[s("back-button",{attrs:{to:{name:"ShiftList"}}}),s("h1",{staticClass:"h1"},[t._v(t._s(t.title))]),s("table",{staticClass:"users-table"},[s("tr",[s("th",[s("button",{staticClass:"table-sort fas",attrs:{type:"button"},on:{click:function(e){return t.sortBy("email")}}},[s("span",{staticClass:"table-sort__icon fas",class:["email"==t.sortField?"fa-chevron-"+t.sortDirection:"fa-minus"]}),t._v(" Email ")])]),s("th",{staticClass:"users-table__input"},[s("button",{staticClass:"table-sort",attrs:{type:"button"},on:{click:function(e){return t.sortBy(t.propName)}}},[s("span",{staticClass:"table-sort__icon fas",class:[t.sortField==t.propName?"fa-chevron-"+t.sortDirection:"fa-minus"]}),t._v(" "+t._s(t.columnName)+" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.allSelected,expression:"allSelected"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.allSelected)?t._i(t.allSelected,null)>-1:t.allSelected},on:{change:function(e){var s=t.allSelected,i=e.target,n=!!i.checked;if(Array.isArray(s)){var r=null,a=t._i(s,r);i.checked?a<0&&(t.allSelected=s.concat([r])):a>-1&&(t.allSelected=s.slice(0,a).concat(s.slice(a+1)))}else t.allSelected=n}}})])])]),t._l(t.sortedUsers,(function(e){return s("tr",{key:e._id,staticClass:"users-table__user"},[s("td",{staticClass:"user__email"},[t._v(t._s(e.email))]),s("td",{staticClass:"users-table__input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedUsers,expression:"selectedUsers"}],attrs:{type:"checkbox"},domProps:{value:e._id,checked:Array.isArray(t.selectedUsers)?t._i(t.selectedUsers,e._id)>-1:t.selectedUsers},on:{change:function(s){var i=t.selectedUsers,n=s.target,r=!!n.checked;if(Array.isArray(i)){var a=e._id,o=t._i(i,a);n.checked?o<0&&(t.selectedUsers=i.concat([a])):o>-1&&(t.selectedUsers=i.slice(0,o).concat(i.slice(o+1)))}else t.selectedUsers=r}}})])])}))],2),s("input",{staticClass:"button",attrs:{type:"submit"}}),s("div",{staticClass:"users-form__form-status",class:t.statusClass},[t._v(t._s(t.status))])],1):s("div",[t._v(" No users "+t._s(t.title.toLowerCase())+" ")])},Ie=[],Ve={name:"AdminPanel",data:function(){return{users:[],selectedUsers:[],status:"",title:"",confirmationText:"",columnName:"",allUsers:void 0,sortField:void 0,sortDirection:"down",statusClass:""}},props:{propName:String},watch:{propName:function(t){this.onPropChange(t)}},computed:{allSelected:{get:function(){return this.users.length==this.selectedUsers.length},set:function(t){this.selectedUsers=t?this.users.map((function(t){return t._id})):[]}},sortedUsers:function(){var t=this;return this.users.slice().sort((function(e,s){var i=0,n=e[t.sortField],r=s[t.sortField];return"boolean"==typeof n?(n&&!r&&(i=-1),r&&!n&&(i=1)):"string"==typeof n&&(i=n.localeCompare(r)),"up"==t.sortDirection&&(i*=-1),i}))}},methods:{submitUsers:function(t){var e=this;if(t.preventDefault&&t.preventDefault(),this.status="",this.statusClass="",0!==this.selectedUsers.length)tt.adminPost(this.propName,this.selectedUsers).then((function(t){t.data?(e.status="Successfully ".concat(e.confirmationText),e.loadUsers()):(e.statusClass="form__error",e.status="Uh oh! something went wrong")}));else{switch(this.propName){case"approved":this.status="Opps, you didn't select anyone to approve!";break;case"admin":this.status="You must have at least one admin user."}this.statusClass="form__error"}},loadUsers:function(){var t=this;tt.getAdminData(this.allUsers).then((function(e){t.users=e.data,t.selectedUsers=[],t.users.forEach((function(e){e[t.propName]&&t.selectedUsers.push(e._id)}))})).catch((function(e){401==e.response.status?t.$router.replace({path:"/shifts"}):console.log(e)}))},sortBy:function(t){t==this.sortField?this.sortDirection="down"==this.sortDirection?"up":"down":(this.sortField=t,this.sortDirection="down")},onPropChange:function(t){switch(t){case"approved":this.title="Users Awaiting Approval",this.confirmationText="approved users",this.columnName="Approved",this.allUsers=void 0;break;case"admin":this.title="Manage Admin Users",this.confirmationText="set admin users",this.columnName="Admin",this.allUsers=!0}this.status="",this.sortField=t,this.loadUsers()}},mounted:function(){this.onPropChange(this.propName)}},qe=Ve,Be=(s("61ae"),Object(c["a"])(qe,Re,Ie,!1,null,null,null)),Ye=Be.exports,Ke=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"side-padded text-center"},[s("h1",{staticClass:"h1"},[t._v("App Store Codes")]),s("h2",{staticClass:"h2"},[t._v("Codes remaining: "+t._s(t.numCodes))]),s("br"),t._m(0),s("br"),s("form",{on:{submit:t.submitCodes}},[s("label",{attrs:{for:"codes"}},[t._v("Enter new codes (each code should be on its own line)")]),s("div",{staticClass:"side-padded"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.codes,expression:"codes"}],attrs:{name:"codes",id:"codes",cols:"30",rows:"20"},domProps:{value:t.codes},on:{input:function(e){e.target.composing||(t.codes=e.target.value)}}})]),s("p",[t._v(t._s(t.statusText))]),s("input",{staticClass:"button",attrs:{type:"submit"}})])])},We=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[s("a",{staticClass:"link",attrs:{href:"https://business.apple.com/#main/b2bapps"}},[t._v("get more codes here")])])}],ze={name:"CodeUploader",data:function(){return{numCodes:"loading...",codes:"",statusText:""}},methods:{submitCodes:function(t){var e=this;if(t.preventDefault&&t.preventDefault(),this.statusText="",""!=this.codes){this.statusText="submitting...";var s=this.codes.split("\n");tt.submitCodes(s).then((function(t){e.numCodes=t.data,e.statusText="successfully submitted codes"})).catch((function(t){e.statusText=t}))}}},mounted:function(){var t=this;tt.getCodesCount().then((function(e){return t.numCodes=e}))}},Je=ze,He=Object(c["a"])(Je,Ke,We,!1,null,null,null),Ge=He.exports,Qe=[{path:"/me",name:"UserView",component:Le.UserView},{path:"/me/:id",name:"UserShiftView",component:Le.ShiftView,meta:{isUser:!0}},{path:"/shift/:id",name:"ShiftView",component:Le.ShiftView},{path:"/shifts",name:"ShiftList",component:Le.ShiftList,beforeEnter:function(t,e,s){0===Object.keys(t.query).length?s({name:"ShiftList",query:Object.assign(t.query,ft.currentFilters.asQuery())}):(ft.currentFilters=new ut(t.query),s())}},{path:"/shifts/new",name:"ShiftForm",component:Le.ShiftForm},{path:"/stationcodes",name:"StationCodes",component:Le.StationCodes},{path:"/login",name:"Login",component:Le.Login,meta:{skipAuth:!0},beforeEnter:function(t,e,s){ft.loginIndex=0,s()}},{path:"/signup",name:"Signup",component:Le.Login,meta:{skipAuth:!0},beforeEnter:function(t,e,s){ft.loginIndex=1,s()}},{path:"/recover",name:"ForgotPassword",component:Le.ForgotPassword,props:{formType:"reset"},meta:{skipAuth:!0}},{path:"/password/edit",name:"PasswordReset",component:Le.Login,meta:{skipAuth:!0},beforeEnter:function(t,e,s){ft.loginIndex=2,s()}},{path:"/confirm",name:"ConfirmEmail",component:Le.ConfirmEmail,meta:{skipAuth:!0},props:{formType:"confirmation"}},{path:"/confirmation",component:Le.Interstitial,name:"SubmitConfirmation",meta:{skipAuth:!0},props:{onCreate:function(t){tt.submitConfirmation(t.$route.query["confirmation_token"]).then((function(){t.$emit("authSuccess"),alert("Email successfully confirmed")})).catch((function(){t.$emit("authFailure"),alert("Something went wrong. Failed to confirm email address. Try logging and follow any instructions given.")}))}}},{path:"/admin/login",name:"AdminLogin",component:Le.Login,meta:{skipAuth:!0},props:{isAdmin:!0},beforeEnter:function(t,e,s){ft.loginIndex=0,s()}},{path:"/admin/approve",name:"AdminApproval",component:Ye,props:{propName:"approved"}},{path:"/admin/admins",name:"AdminManagement",component:Ye,props:{propName:"admin"}},{path:"/admin/codes",name:"AdminCodes",component:Ge}],Xe=new De["a"]({mode:"history",base:"/",routes:Qe,scrollBehavior:function(t,e,s){return s||{x:0,y:0}}});Xe.beforeEach(function(){var t=Object(L["a"])(regeneratorRuntime.mark((function t(e,s,i){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=ft.isAuthed,null!==n){t.next=5;break}return t.next=4,ft.testToken();case 4:n=t.sent;case 5:r=e.matched.some((function(t){return t.name&&t.name.includes("Admin")})),e.matched.some((function(t){return!t.meta.skipAuth==n}))?i():n?(a=r?{name:"AdminApproval"}:{name:"ShiftList",query:ft.currentFilters.asQuery()},i(a)):i({name:r?"AdminLogin":"Login"});case 7:case"end":return t.stop()}}),t)})));return function(e,s,i){return t.apply(this,arguments)}}());var Ze=Xe,ts=s("859b");s("d355");k(i["a"]),i["a"].use(De["a"]),i["a"].use(jt),i["a"].component("datetime",ts["Datetime"]),new i["a"]({methods:{openUrl:function(){}},router:Ze,render:function(t){return t(je)}}).$mount("#app")},d31b:function(t,e,s){"use strict";var i=s("8b36"),n=s.n(i);n.a},edbd:function(t,e,s){"use strict";var i=s("64dc"),n=s.n(i);n.a},f7cf:function(t,e,s){"use strict";var i=s("9f26"),n=s.n(i);n.a}});
//# sourceMappingURL=app.57cde32a.js.map