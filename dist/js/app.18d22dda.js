(function(t){function e(e){for(var i,a,o=e[0],u=e[1],c=e[2],f=0,d=[];f<o.length;f++)a=o[f],n[a]&&d.push(n[a][0]),n[a]=0;for(i in u)Object.prototype.hasOwnProperty.call(u,i)&&(t[i]=u[i]);l&&l(e);while(d.length)d.shift()();return r.push.apply(r,c||[]),s()}function s(){for(var t,e=0;e<r.length;e++){for(var s=r[e],i=!0,o=1;o<s.length;o++){var u=s[o];0!==n[u]&&(i=!1)}i&&(r.splice(e--,1),t=a(a.s=s[0]))}return t}var i={},n={app:0},r=[];function a(e){if(i[e])return i[e].exports;var s=i[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=t,a.c=i,a.d=function(t,e,s){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(s,i,function(e){return t[e]}.bind(null,i));return s},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var l=u;r.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("cd49")},"09f2":function(t,e,s){},"18da":function(t,e,s){"use strict";var i=s("6b6f"),n=s.n(i);n.a},"1cde":function(t,e,s){},"2bf1":function(t,e,s){"use strict";var i=s("5455"),n=s.n(i);n.a},"38de":function(t,e,s){},5455:function(t,e,s){},6018:function(t,e,s){"use strict";var i=s("b202"),n=s.n(i);n.a},"61ae":function(t,e,s){"use strict";var i=s("1cde"),n=s.n(i);n.a},"64dc":function(t,e,s){},"6b6f":function(t,e,s){},"6f19":function(t,e,s){"use strict";var i=s("ea45"),n=s.n(i);n.a},"8b36":function(t,e,s){},9249:function(t,e,s){"use strict";var i=s("fae0"),n=s.n(i);n.a},9804:function(t,e,s){"use strict";var i=s("9a27"),n=s.n(i);n.a},"9a27":function(t,e,s){},"9d64":function(t,e,s){t.exports=s.p+"assets/logo1cbf7568.png"},b202:function(t,e,s){},bac7:function(t,e,s){"use strict";var i=s("09f2"),n=s.n(i);n.a},c68c:function(t,e,s){"use strict";var i=s("38de"),n=s.n(i);n.a},cd49:function(t,e,s){"use strict";s.r(e);var i=s("2b0e"),n=s("4380"),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return"checkbox"===t.type?s("input",t._b({directives:[{name:"model",rawName:"v-model",value:t.mask,expression:"mask"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.mask)?t._i(t.mask,null)>-1:t.mask},on:{change:function(e){var s=t.mask,i=e.target,n=!!i.checked;if(Array.isArray(s)){var r=null,a=t._i(s,r);i.checked?a<0&&(t.mask=s.concat([r])):a>-1&&(t.mask=s.slice(0,a).concat(s.slice(a+1)))}else t.mask=n}}},"input",t.bind,!1)):"radio"===t.type?s("input",t._b({directives:[{name:"model",rawName:"v-model",value:t.mask,expression:"mask"}],attrs:{type:"radio"},domProps:{checked:t._q(t.mask,null)},on:{change:function(e){t.mask=null}}},"input",t.bind,!1)):s("input",t._b({directives:[{name:"model",rawName:"v-model",value:t.mask,expression:"mask"}],attrs:{type:t.type},domProps:{value:t.mask},on:{input:function(e){e.target.composing||(t.mask=e.target.value)}}},"input",t.bind,!1))},a=[],o=(s("ac1f"),s("1276"),s("d0ff")),u={props:["type","value","bind"],computed:{format:function(){return"date"==this.type?"YYYY-MM-DD":"HH:mm"},mask:{get:function(){return this.$options.filters.dateFormat(this.value,this.format)},set:function(t){var e;if("date"==this.type)e=new Date("".concat(t,"T00:00:01"));else{var s;e=new Date(this.value);var i=t.split(":");(s=e).setHours.apply(s,Object(o["a"])(i))}this.$emit("input",e)}}},methods:{onDateTimeSelected:function(t){this.$emit("input",t.value)}}},c=u,l=s("2877"),f=Object(l["a"])(c,r,a,!1,null,null,null),d=f.exports,h=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal-container",attrs:{"focus-trap":"true"},on:{click:t.clickOutside}},[s("div",{staticClass:"ns-modal emsa-modal"},[t._t("default")],2)])},m=[],p={methods:{clickOutside:function(t){t.target==this.$el&&this.$parent.$close(null)}}},v=p,g=(s("9804"),Object(l["a"])(v,h,m,!1,null,null,null)),b=g.exports,_=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("router-link",{staticClass:"button cta--is-round cta--is-back fas fa-angle-left",attrs:{to:t.to,"aria-label":"back"}})},w=[],y={props:{to:{default:function(){return{name:"ShiftList"}}}}},k=y,S=Object(l["a"])(k,_,w,!1,null,null,null),C=S.exports;function x(t){t.use(n["b"]),t.component("DateInput",d),t.component("ModalContainer",b),t.component("BackButton",C)}var F=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"emsa-root"},[s("header",[s("nav",[s("ul",{staticClass:"emsa-menu"},t._l(t.menuTabs,(function(e,i){return s("li",{key:i,staticClass:"emsa-menu__item",class:{"emsa-menu__item--is-selected":e.isSelected}},[s("router-link",{attrs:{to:e.route}},[t._v(t._s(e.title))])],1)})),0)])]),s("main",[s("div",{staticClass:"notification text-center"},[t._v(t._s(t.notification))]),s("router-view",t._g({staticClass:"emsa-page"},t.currentPageListeners))],1),s("dialogs-wrapper")],1)},L=[],O=(s("caad"),s("b0c0"),s("d3b7"),s("2532"),s("96cf"),s("c964")),A=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"side-padded"},[s("back-button"),s("h1",{staticClass:"h1 text-center"},[t._v("List a Shift")]),s("form",{staticClass:"form",attrs:{novalidate:""},on:{submit:t.submitForm}},[t._l(t.fields,(function(e){return s("div",{key:e.fieldName,staticClass:"form-field"},[s("label",{staticClass:"form-field__label",attrs:{for:e.fieldName}},[t._v(t._s(e.label))]),"radio"==e.inputType?s("div",{attrs:{role:"radiogroup"}},t._l(e.values,(function(i){return s("span",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.shift[e.fieldName],expression:"shift[f.fieldName]"}],attrs:{type:"radio",id:e.fieldName+"-"+i},domProps:{value:i.value,checked:t._q(t.shift[e.fieldName],i.value)},on:{change:function(s){return t.$set(t.shift,e.fieldName,i.value)}}}),s("label",{attrs:{for:e.fieldName+"-"+i}},[t._v(t._s(i.label))])])})),0):s("div",["date"==e.inputType||"time"==e.inputType?s("date-input",{attrs:{type:e.inputType},model:{value:t.shift[e.fieldName],callback:function(s){t.$set(t.shift,e.fieldName,s)},expression:"shift[f.fieldName]"}}):"checkbox"===e.inputType?s("input",{directives:[{name:"model",rawName:"v-model",value:t.shift[e.fieldName],expression:"shift[f.fieldName]"}],attrs:{id:e.fieldName,type:"checkbox"},domProps:{checked:Array.isArray(t.shift[e.fieldName])?t._i(t.shift[e.fieldName],null)>-1:t.shift[e.fieldName]},on:{change:function(s){var i=t.shift[e.fieldName],n=s.target,r=!!n.checked;if(Array.isArray(i)){var a=null,o=t._i(i,a);n.checked?o<0&&t.$set(t.shift,e.fieldName,i.concat([a])):o>-1&&t.$set(t.shift,e.fieldName,i.slice(0,o).concat(i.slice(o+1)))}else t.$set(t.shift,e.fieldName,r)}}}):"radio"===e.inputType?s("input",{directives:[{name:"model",rawName:"v-model",value:t.shift[e.fieldName],expression:"shift[f.fieldName]"}],attrs:{id:e.fieldName,type:"radio"},domProps:{checked:t._q(t.shift[e.fieldName],null)},on:{change:function(s){return t.$set(t.shift,e.fieldName,null)}}}):s("input",{directives:[{name:"model",rawName:"v-model",value:t.shift[e.fieldName],expression:"shift[f.fieldName]"}],attrs:{id:e.fieldName,type:e.inputType},domProps:{value:t.shift[e.fieldName]},on:{input:function(s){s.target.composing||t.$set(t.shift,e.fieldName,s.target.value)}}})],1)])})),t._m(0)],2)],1)},P=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"text-center"},[s("input",{staticClass:"button",attrs:{type:"submit"}})])}],T=(s("4160"),s("d81d"),s("159b"),s("ddb0"),s("276c")),N=function t(e){Object(T["a"])(this,t),this.isOffering=!0,this.isField=!0,this.position=0,this.isOcp=!1,this.shiftDate=new Date,this.shiftLetter="A",this.timeFrame=12,this.shiftStart=new Date((new Date).setHours(10,0,0,0)),this.shiftEnd=new Date((new Date).setHours(22,0,0,0)),this.tradePreference=0,this.tradeDates="",this.notes="",this.email="",Object.assign(this,e),this.shiftDate=new Date(this.shiftDate),this.shiftStart=new Date(this.shiftStart),this.shiftEnd=new Date(this.shiftEnd)},D=s("e954"),M=(s("c975"),s("25f0"),function(){function t(e){Object(T["a"])(this,t),this.trueValue=e[0],this.falseValue=e[1]}return Object(D["a"])(t,[{key:"convertFrom",value:function(t){return t?this.trueValue:this.falseValue}},{key:"convertTo",value:function(t){return t==this.trueValue}}]),t}()),$=function(){function t(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;Object(T["a"])(this,t),this.values=e,this.offset=s,this.notFound=i}return Object(D["a"])(t,[{key:"convertFrom",value:function(t){return t-this.offset<0?this.notFound:this.values[t-this.offset]}},{key:"convertTo",value:function(t){return this.values.indexOf(t)+this.offset}}]),t}(),U=function(){function t(e){Object(T["a"])(this,t),this.nanString=e}return Object(D["a"])(t,[{key:"convertFrom",value:function(t){return t<0?this.nanString:t.toString()}},{key:"convertTo",value:function(t){var e=parseInt(t);return isNaN(e)?-1:e}}]),t}(),j=function(){function t(){Object(T["a"])(this,t)}return Object(D["a"])(t,[{key:"convertFrom",value:function(t){return t&&t.toString()}},{key:"convertTo",value:function(t){return t}}]),t}(),E=function(){function t(e){Object(T["a"])(this,t),this.shift=e,this.annotatedFields=["isOffering","isField","position","isOcp","shiftDate","shiftLetter","timeFrame","shiftStart","shiftEnd","tradePreference","tradeDates","notes"]}return Object(D["a"])(t,[{key:"getFieldInputType",value:function(t){switch(t){case"isField":case"position":case"isOffering":case"isOcp":case"tradePreference":case"shiftLetter":case"timeFrame":return"radio";case"shiftDate":return"date";case"shiftStart":case"shiftEnd":return"time";case"notes":return"textarea";default:return"text"}}},{key:"getFieldLabel",value:function(t){var e=void 0,s=this.shift.isOffering;switch(t){case"isField":e="Is this shift Comm or Field?";break;case"position":e=s?"What position is the shift for?":"What's your position?";break;case"isOffering":e="Are you offering a shift or picking up a shift?";break;case"shiftDate":e=s?"What date is the shift you're offering?":"What date are you looking for a shift on?";break;case"isOcp":e=s?"What type of shift are you offering?":"What type of shift are you looking for?";break;case"tradePreference":e="Do you want a trade for this shift?";break;case"shiftStart":e=s?"When does the shift start?":"When should the shift start?";break;case"shiftEnd":e=s?"When does the shift end?":"When should the shift start?";break;case"tradeDates":e=this.shift.tradePreference<0?void 0:"What dates would you be open to trading for?";break;case"notes":e="Any notes about the shift?";break;case"shiftLetter":e=this.shift.isOffering?"Which shift?":void 0;break;case"timeFrame":e=(s?"Is this shift a":"Should this shift be")+" 12, a 24, or something else? (explain something else in the notes)";break}return e}},{key:"getFieldValueLabels",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];switch(t){case"isField":return["Field","Comm"];case"position":return["Medic","CS","Captain","Commander"];case"isOffering":return e?["Offering","Seeking"]:["Offering","Picking Up"];case"isOcp":return["OCP","Shift"];case"tradePreference":return e?["No Trade","Open to Trade","Trade Only"]:["No Thanks","I'm Open","Trade Required"];case"shiftLetter":return["A","B","C","D"];case"timeFrame":return["12","24","Other"]}}},{key:"getFieldValueConverter",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=this.getFieldValueLabels(t,e);if(s)switch(t){case"isField":case"isOffering":case"isOcp":return new M(s);case"position":return new $(s);case"tradePreference":return new $(s,-1);case"timeFrame":return new U("Other");default:return new j}}},{key:"getFieldValueName",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=this.shift[t],i=this.getFieldValueConverter(t,e);return i?i.convertFrom(s):s}},{key:"getFieldFilterName",value:function(t){switch(t){case"isOffering":return"Post Type";case"isField":return"Comm or Field";case"position":return"Position";case"isOcp":return"Shift Type";case"tradePreference":return"Trade Preference";case"tradeDates":return this.shift&&this.shift.tradePreference<0?void 0:"Trade Dates";case"notes":return"Notes";case"shiftLetter":return this.shift&&this.shift.isOffering?"A, B, C, or D?":void 0;case"timeFrame":return"12, 24, or Other?"}return t}}]),t}(),I=(s("99af"),s("f3f3")),R=s("bc3a"),V=s.n(R);s("5319");function q(t){return t.replace(/(_\w)/g,(function(t){return t[1].toUpperCase()}))}function Y(t){return t.replace(/[\w]([A-Z])/g,(function(t){return t[0]+"_"+t[1]})).toLowerCase()}function W(t){var e=q(JSON.stringify(t));return JSON.parse(e)}var B={saveAuthToken:function(){},getAuthToken:function(){return"token"},saveState:function(){},getState:function(){},logout:function(){return!0},isAuthed:function(){return!0}},K=B,H=s("4328"),J=s.n(H),z="https://shifts-api.austinemsa.org";function Q(t){var e=t.getTimezoneOffset()/60,s=e<0?"+":"-";return"".concat(Object(n["a"])(t,"YYYY-MM-DDTHH:mm:ss")).concat(s).concat(Math.abs(e),"00")}function Z(t){return J.a.stringify(t,{arrayFormat:"brackets",serializeDate:Q,encoder:function(t,e,s,i){return"key"==i&&(t=Y(t)),e(t,e,s)}})}var G,X=V.a.create({baseURL:z,withCredentials:!0,transformRequest:[Z],paramsSerializer:Z});function tt(t){return{}}function et(t){return function(e){console.log(e),"function"==typeof t&&t(e)}}var st={signup:function(t){return new Promise((function(e,s){X.post("/signup",{user:t}).then(e).catch(et(s))}))},login:function(t){return new Promise((function(e,s){X.post("/oauth/token",Object(I["a"])(Object(I["a"])({},t),{},{grant_type:"password",scope:"web"})).then((function(t){G=t.data.access_token,K.saveAuthToken(G),e()})).catch(et(s))}))},logout:function(){return X.post("/oauth/revoke")},getShifts:function(t,e,s){return X.get("/shifts",{params:t,headers:tt()}).then((function(t){var s=W(t.data).sort((function(t,e){var s=new Date(t.shiftDate).getTime()-new Date(e.shiftDate).getTime();return 0==s&&(s=new Date(t.shiftStart).getTime()-new Date(e.shiftStart).getTime()),s}));e&&e(s)})).catch((function(t){console.log(t),s&&s(t)}))},submitShift:function(t){return X.post("/shifts",{shift:t},{headers:tt()})},getShift:function(t){return new Promise((function(e,s){X.get("/shifts/".concat(t)).then((function(t){e(t.data)})).catch(s)}))},deleteShift:function(t){return X.delete("/shifts/".concat(t.id),{headers:tt()})},testToken:function(){return new Promise((function(t){var e=K.getAuthToken();e||t(!1),X.get("/oauth/token/info",{headers:tt()}).then((function(e){return t(e)})).catch((function(){return t(!1)}))}))},getAdminData:function(t){return X.get("/users",{params:{all:t}})},adminPost:function(t,e){return X.post("/bulk_".concat(t),{user_ids:e})},getCodesCount:function(){return new Promise((function(t,e){X.get("/codes/count").then((function(e){t(e.data)})).catch(e)}))},submitCodes:function(t){return X.post("/codes/upload",{codes:t})},getUserCodes:function(){return X.get("/codes")},requestCode:function(){return X.post("/codes")}},it=st;s("b64b");function nt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return t};return t?t instanceof Array?t.map((function(t){return e(t)})):[e(t)]:[]}function rt(t){return"boolean"==typeof t?t:"true"==t.toLowerCase()}function at(t){"string"!=typeof t||isNaN(parseInt(t))||(t=parseInt(t));var e=new Date(t);return isNaN(e.getTime())?new Date:e}var ot=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(T["a"])(this,t),this.isField=nt(e.isField,rt),this.position=nt(e.position,parseInt),this.isOffering=nt(e.isOffering,rt),this.isOcp=nt(e.isOcp,rt),this.shiftLetter=nt(e.shiftLetter),this.timeFrame=nt(e.timeFrame,parseInt),this.tradePreference=nt(e.tradePreference,parseInt),this.date=nt(e.date||[new Date],at),this.dateType=e.dateType||"After"}return Object(D["a"])(t,[{key:"asQuery",value:function(){var t=this,e={};return this.sortedKeys.forEach((function(s){if("date"==s)e[s]=t[s].map((function(t){return t.getTime().toString()}));else if("dateType"==s)e[s]=t[s];else{var i=t[s];i instanceof Array&&i.length>0&&(e[s]=i.map((function(t){return t.toString()})))}})),e}},{key:"equals",value:function(t){return JSON.stringify(this,this.sortedKeys)==JSON.stringify(t,this.sortedKeys)}},{key:"sortedKeys",get:function(){return Object.keys(this).sort()}}]),t}();ot.checkboxFields=["isOffering","isField","position","isOcp","shiftLetter","timeFrame","tradePreference"];var ut,ct,lt=function(){function t(){Object(T["a"])(this,t),this.state={selectedShift:null,scrollIndex:0,currentList:[],userList:[],loginIndex:0,currentFilters:new ot,isAuthed:null,isAdmin:!1,config:{}}}return Object(D["a"])(t,[{key:"testToken",value:function(){var t=Object(O["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,it.testToken();case 2:return e=t.sent,!1===e?this.isAuthed=!1:(this.state.isAuthed=!0,this.state.isAdmin=e.data.admin,this.state.config=e.data.config||{},this.saveState()),t.abrupt("return",this.isAuthed);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"logout",value:function(){var t=this;return new Promise((function(e){it.logout().then((function(){K.logout(),t.state.isAuthed=!1,t.clearState(),e(!0)})).catch((function(t){console.log(t),e(!1)}))}))}},{key:"saveState",value:function(){this.saveStateMethod&&this.saveStateMethod()}},{key:"reviveState",value:function(t){t&&!t.noState&&(Object.assign(this.state,t),this.state.currentFilters=new ot(t.currentFilters))}},{key:"loadList",value:function(t){var e=this;return it.getShifts(this.state.currentFilters,(function(s){e.currentList=s,e.onListSuccess&&e.onListSuccess(),"function"==typeof t&&t()}),(function(t){t.response&&e.onListError&&[401,403].includes(t.response.status)&&e.onListError(t)}))}},{key:"clearState",value:function(){this.state.selectedShift=null,this.state.scrollIndex=0,this.state.currentList=[],this.state.currentFilters=new ot,this.saveState()}},{key:"selectedShift",get:function(){return this.state.selectedShift},set:function(t){this.state.selectedShift=t,this.saveState()}},{key:"scrollIndex",get:function(){return this.state.scrollIndex},set:function(t){this.state.scrollIndex=t,this.saveState()}},{key:"currentList",get:function(){return this.state.currentList},set:function(t){t=t.map((function(t){return new N(t)})),this.state.currentList=t.sort((function(t,e){var s=t.shiftDate.valueOf()-e.shiftDate.valueOf();return 0==s&&(s=t.shiftStart.valueOf()-e.shiftStart.valueOf()),s})),this.saveState()}},{key:"currentFilters",get:function(){return this.state.currentFilters},set:function(t){t&&!this.currentFilters.equals(t)&&(this.state.currentFilters=t,this.saveState())}},{key:"userList",get:function(){return this.state.userList},set:function(t){this.state.userList=t}},{key:"loginIndex",get:function(){return this.state.loginIndex},set:function(t){this.state.loginIndex=t,this.saveState()}},{key:"isAuthed",get:function(){return this.state.isAuthed},set:function(t){this.state.isAuthed=t,this.saveState()}},{key:"isAdmin",get:function(){return this.state.isAdmin}}]),t}(),ft=new lt,dt=ft,ht=i["a"].extend({data:function(){return{store:dt}},mounted:function(){var t=this;this.$nextTick((function(){t.$emit("pageMounted")}))}}),mt={name:"ShiftForm",mixins:[ht],data:function(){var t=new N,e={},s=new E(t);return s.annotatedFields.forEach((function(t){var i=s.getFieldInputType(t);e[t]={inputType:i};var n=s.getFieldValueLabels(t);if(n){var r=s.getFieldValueConverter(t);e[t].values=n.map((function(t){return{label:t,value:r?r.convertTo(t):t}}))}})),{shift:t,valueManager:e,viewModel:s}},computed:{fields:function(){var t=[];for(var e in this.shift){var s=this.viewModel.getFieldLabel(e);if(s){var i=this.valueManager[e]||{};t.push({label:s,inputType:i.inputType,values:i.values,fieldName:e})}}return t}},methods:{submitForm:function(t){var e=this;t.preventDefault&&t.preventDefault(),console.log("submitting shift: ",this.shift),it.submitShift(this.shift).then(Object(O["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,alert("Successfully saved!");case 2:e.$emit("back");case 3:case"end":return t.stop()}}),t)})))).catch((function(t){console.log(t)}))}}},pt=mt,vt=Object(l["a"])(pt,A,P,!1,null,"1c94ec22",null),gt=vt.exports,bt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"side-padded"},[s("div",{staticClass:"text-center filter-button"},[s("button",{staticClass:"button",on:{click:t.showFiltersModal}},[t._v("Filters")])]),0==t.store.currentList.length?s("p",[t._v("There are currently no posts that match your search criteria. Please check back again soon, or make your own post seeking a swap")]):t._e(),s("ul",t._l(t.store.currentList,(function(t,e){return s("ShiftListItem",{key:e,attrs:{shift:t}})})),1)])},_t=[],wt=i["a"].extend({data:function(){return{forList:!0,displayFields:["isOffering","position","isOcp","isOffering","isField","tradePreference","shiftLetter","timeFrame"]}},computed:{dateFormatFilter:function(){return this.$options.filters&&this.$options.filters.dateFormat},dateString:function(){if(void 0===this.dateFormatFilter)return"";var t=new Date(this.displayedShift.shiftDate),e=t.getFullYear()==(new Date).getFullYear(),s=e?"dddd, M/DD":"dddd, M/DD/YY";return this.dateFormatFilter(t,s)},timeString:function(){if(void 0===this.dateFormatFilter)return"";var t=this.dateFormatFilter(new Date(this.displayedShift.shiftStart),"h:mm a"),e=this.dateFormatFilter(new Date(this.displayedShift.shiftEnd),"h:mm a");return"".concat(t,"-").concat(e)},valueLabels:function(){var t={date:this.dateString,time:this.timeString},e=this;return e.displayFields.forEach((function(s){t[s]=e.viewModel.getFieldValueName(s,e.forList)})),t},displayedShift:function(){return new N},viewModel:function(){return new E(this.displayedShift)}}}),yt={name:"ShiftListItem",mixins:[wt],props:["shift","isUser"],computed:{displayedShift:function(){return this.shift}},render:function(){var t=arguments[0],e="shift-item shift-item--is-".concat(this.valueLabels.isOffering.toLowerCase());return t("li",{class:e},[t("router-link",{attrs:{to:{name:this.isUser?"UserShiftView":"ShiftView",params:{id:this.displayedShift.id}}}},[t("span",{class:"shift-item__is-offering"},[this.valueLabels.isOffering]),t("span",{class:"shift-item__is-ocp"},[this.valueLabels.isOcp]),t("span",{class:"shift-item__position"},[this.valueLabels.position]),t("div",{class:"shift-item__dates"},["".concat(this.valueLabels.date," ").concat(this.valueLabels.time)]),t("div",{class:"shift-item__bottom-row"},[t("span",{class:"shift-item__is-field"},[this.valueLabels.isField]),t("span",{attrs:{className:"shift-item__shift-letter"}},[this.displayedShift.isOffering?this.valueLabels.shiftLetter:""]),t("span",{attrs:{className:"shift-item__time-frame"}},[this.valueLabels.timeFrame]),t("span",{class:"shift-item__trade-preference"},[this.valueLabels.tradePreference])])])])}},kt=yt,St=(s("bac7"),s("c68c"),Object(l["a"])(kt,ut,ct,!1,null,"98790ee2",null)),Ct=St.exports,xt=ht.extend({name:"ShiftList",components:{ShiftListItem:Ct},data:function(){return{dataIsLoading:!1}},methods:{getShifts:function(t){var e=this,s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2?arguments[2]:void 0;this.dataIsLoading=s,this.store.currentFilters=t,this.store.loadList((function(){e.dataIsLoading=!1,"function"==typeof i&&i()}))},onPullToRefresh:function(t){var e=this;this.$nextTick((function(){e.getShifts(e.store.currentFilters,!1,(function(){return e.notifyPullToRefreshFinished(t)}))}))},showFiltersModal:function(){var t=Object(O["a"])(regeneratorRuntime.mark((function t(){var e,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={props:{filters:this.store.currentFilters}},t.next=3,this.showModal(e);case 3:if(s=t.sent,s&&!this.store.currentFilters.equals(s)){t.next=6;break}return t.abrupt("return");case 6:this.getShifts(s),this.onNewFilters(s);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),showModal:function(t){return new Promise((function(t){return t()}))},onNewFilters:function(t){},notifyPullToRefreshFinished:function(t){},scrollListToIndex:function(t){},onScroll:function(t){this.store.scrollIndex=t}},mounted:function(){var t=this;0===this.store.currentList.length?this.getShifts(this.store.currentFilters,!0,(function(){t.scrollListToIndex(t.store.scrollIndex)})):this.$nextTick((function(){t.scrollListToIndex(t.store.scrollIndex)}))}}),Ft=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("modal-container",{staticClass:"filter-form"},[s("div",[s("button",{staticClass:"button ns-modal__close-button cta--is-round cta--is-close fas fa-times",attrs:{"aria-label":"close"},on:{click:function(e){return t.$close(null)}}}),s("h1",{staticClass:"filter-form__header"},[t._v("Filter Shift Results")]),s("fieldset",{staticClass:"filter-group"},[s("label",{staticClass:"filter-group__group-label"},[t._v("Dates")]),s("div",[s("select",{directives:[{name:"model",rawName:"v-model",value:t.filterModel.dateType,expression:"filterModel.dateType"}],attrs:{name:"dateType",id:"date-type","aria-label":"Date filter type"},on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filterModel,"dateType",e.target.multiple?s:s[0])},t.onDateTypeChange]}},t._l(t.dateTypes,(function(e){return s("option",{domProps:{value:e}},[t._v(t._s(e))])})),0),s("date-input",{attrs:{bind:{minDate:t.today},type:"date"},model:{value:t.filterModel.date[0],callback:function(e){t.$set(t.filterModel.date,0,e)},expression:"filterModel.date[0]"}}),"Between"==t.filterModel.dateType?s("date-input",{attrs:{bind:{minDate:t.filterModel.date[0]},type:"date"},model:{value:t.filterModel.date[1],callback:function(e){t.$set(t.filterModel.date,1,e)},expression:"filterModel.date[1]"}}):t._e()],1)]),t._l(t.checkboxFields,(function(e){return s("shift-filter-group",{key:e,attrs:{"filter-key":e},model:{value:t.filterModel[e],callback:function(s){t.$set(t.filterModel,e,s)},expression:"filterModel[filterKey]"}})})),s("div",{staticClass:"text-center"},[s("button",{staticClass:"button",on:{click:function(e){return t.$close(t.filterModel)}}},[t._v("Done")])])],2)])},Lt=[],Ot=(s("fb6a"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("fieldset",{staticClass:"filter-group"},[s("legend",{staticClass:"filter-group__group-label"},[t._v(t._s(t.label))]),s("div",{staticClass:"filter-group__items"},t._l(t.boxes,(function(e,i){return s("span",{key:e},[s("input",{attrs:{id:t.filterKey+"-"+e,type:"checkbox"},domProps:{checked:t.checks[i]},on:{change:function(e){return t.updateValue(e,i)}}}),s("label",{attrs:{for:t.filterKey+"-"+e}},[t._v(t._s(e))])])})),0)])}),At=[],Pt=(s("a434"),{props:{value:Array,filterKey:String},data:function(){var t=new E(null);return{viewModel:t,converter:t.getFieldValueConverter(this.filterKey,!0),label:t.getFieldFilterName(this.filterKey),boxes:t.getFieldValueLabels(this.filterKey,!0)}},computed:{checks:function(){var t=this;return this.boxes.map((function(e){var s=t.converter?t.converter.convertTo(e):e;return t.value.indexOf(s)>=0}))}},methods:{updateValue:function(t,e){var s=this.value.slice(),i=t.target?t.target.checked:t.value;if(i!=this.checks[e]){var n=this.converter.convertTo(this.boxes[e]),r=this.value.indexOf(n);i&&r<0?s.push(n):!i&&r>=0&&s.splice(r,1),this.$emit("input",s.sort())}}}}),Tt=Pt,Nt=(s("18da"),Object(l["a"])(Tt,Ot,At,!1,null,null,null)),Dt=Nt.exports,Mt={components:{ShiftFilterGroup:Dt},props:{filters:Object},data:function(){var t=new E;return{filterModel:new ot(this.filters),checkboxFields:ot.checkboxFields,viewModel:t,dateTypes:["On","Before","After","Between"],today:new Date}},methods:{onDateTypeChange:function(t){if(this.filterModel.dateType=t.object?t.object.selectedValue:t.target.value,"Between"==this.filterModel.dateType){var e=this.filterModel.date[0];this.filterModel.date=[e,e]}else this.filterModel.date=this.filterModel.date.slice(0,1)},onDateChanged:function(t,e){this.filterModel.date[e]=t.value}}},$t=Mt,Ut=(s("6018"),Object(l["a"])($t,Ft,Lt,!1,null,null,null)),jt=Ut.exports,Et=s("9935"),It=Object(Et["create"])(jt),Rt={name:"ShiftList",mixins:[xt],methods:{showModal:function(t){return It(Object(I["a"])({},t.props))},onNewFilters:function(t){this.$router.push({name:"ShiftList",query:t.asQuery()})}}},Vt=Rt,qt=(s("d31b"),Object(l["a"])(Vt,bt,_t,!1,null,"2af6cac8",null)),Yt=qt.exports,Wt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"side-padded"},[s("back-button",{attrs:{to:t.backPage}}),s("h1",{staticClass:"h1 text-center"},[t._v(t._s(t.valueLabels.isOffering)+" Shift")]),s("h2",{staticClass:"h2 text-center"},[t._v(t._s(t.valueLabels.date))]),s("h2",{staticClass:"h2 text-center"},[t._v(t._s(t.valueLabels.time))]),s("table",{staticClass:"shift-view"},t._l(t.listedFields,(function(e){return s("tr",{key:e},[s("td",{staticClass:"shift-view__label"},[t._v(t._s(t.fieldLabels[e]))]),s("td",{staticClass:"shift-view__value"},[t._v(t._s(t.valueLabels[e]))])])})),0),s("div",{staticClass:"text-center"},[t.displayedShift.isUser?s("button",{staticClass:"button cta",on:{click:t.deletePost}},[t._v("Delete This Post")]):s("a",{staticClass:"button cta",attrs:{href:t.shiftEmail,target:"_blank"}},[t._v("Email This Poster")])])],1)},Bt=[],Kt=(s("4de4"),s("7db0"),s("7039"),s("466d"),/(id|shiftDate|shiftStart|shiftEnd|email)/),Ht=Object.getOwnPropertyNames(new N).filter((function(t){return!t.match(Kt)})),Jt={name:"ShiftView",mixins:[wt,ht],data:function(){return{displayFields:Ht,listedFields:[],rowSpec:[],fieldLabels:{}}},computed:{displayedShift:function(){return this.store.selectedShift},shiftEmail:function(){return"mailto:".concat(this.displayedShift.email,"?subject=Your%20Shift%20App%20Post&body=%0A%0A").concat(this.store.state.config.email_warning)},backPage:function(){return{name:this.displayedShift.isUser?"UserView":"ShiftList"}}},methods:{goBack:function(){this.$emit("back")},openEmail:function(){this.$root.openUrl(this.shiftEmail)},deletePost:function(){var t=this;it.deleteShift(this.displayedShift).then(Object(O["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,alert("Successfully deleted!");case 2:t.$router?t.$router.push(t.backPage):t.$emit("back");case 3:case"end":return e.stop()}}),e)})))).catch((function(t){console.log(t)}))}},beforeRouteEnter:function(){var t=Object(O["a"])(regeneratorRuntime.mark((function t(e,s,i){var n,r,a,o,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.meta.isUser,r=n?dt.userList:dt.currentList,t.prev=2,!r.length){t.next=7;break}a=r.find((function(t){return t.id==e.params.id})),t.next=11;break;case 7:return t.next=9,it.getShift(e.params.id);case 9:o=t.sent,a=new N(o);case 11:a.isUser=n,dt.selectedShift=a,i(),t.next=21;break;case 16:return t.prev=16,t.t0=t["catch"](2),u=s.name?s:{name:n?"UserView":"ShiftList"},i(u),t.abrupt("return");case 21:case"end":return t.stop()}}),t,null,[[2,16]])})));function e(e,s,i){return t.apply(this,arguments)}return e}(),beforeRouteLeave:function(t,e,s){dt.selectedShift=null,s()},created:function(){for(var t=0;t<Ht.length;t++){var e=Ht[t];if("isOffering"!=e){var s=this.viewModel.getFieldFilterName(e);s&&(this.listedFields.push(e),this.fieldLabels[e]=s,this.rowSpec.push("auto"))}}}},zt=Jt,Qt=(s("2bf1"),Object(l["a"])(zt,Wt,Bt,!1,null,"1c9f9ff3",null)),Zt=Qt.exports,Gt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("form",{staticClass:"side-padded text-center login-form",attrs:{novalidate:""},on:{submit:t.onSubmit}},[i("img",{attrs:{src:s("9d64"),alt:"Austin EMSA Logo"}}),i("h1",{staticClass:"h1"},[t._v("Shift Request "+t._s(t.isAdmin?"Admin Panel":""))]),i("div",{staticClass:"form__message text-center"},[t._v(t._s(t.formMessage))]),t.store.loginIndex<2?i("div",[i("div",{staticClass:"form__error text-center"},[t._v(t._s(t.formError))]),i("div",{staticClass:"form-field"},[i("label",{staticClass:"form-field__label",attrs:{for:"email"}},[t._v("Email")]),i("p",{staticClass:"form-field__error"},[t._v(t._s(t.fieldErrors.email&&"Email "+t.fieldErrors.email[0]))]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.user.email,expression:"user.email"}],staticClass:"form-field__input",attrs:{type:"email",id:"email",autocomplete:"email"},domProps:{value:t.user.email},on:{input:function(e){e.target.composing||t.$set(t.user,"email",e.target.value)}}})]),i("div",{staticClass:"form-field"},[i("label",{staticClass:"form-field__label",attrs:{for:"password"}},[t._v("Password")]),i("p",{staticClass:"form-field__error"},[t._v(t._s(t.fieldErrors.password&&"Password "+t.fieldErrors.password[0]))]),"checkbox"===(t.showPassword?"text":"password")?i("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-field__input",attrs:{id:"password",type:"checkbox"},domProps:{checked:Array.isArray(t.user.password)?t._i(t.user.password,null)>-1:t.user.password},on:{change:function(e){var s=t.user.password,i=e.target,n=!!i.checked;if(Array.isArray(s)){var r=null,a=t._i(s,r);i.checked?a<0&&t.$set(t.user,"password",s.concat([r])):a>-1&&t.$set(t.user,"password",s.slice(0,a).concat(s.slice(a+1)))}else t.$set(t.user,"password",n)}}}):"radio"===(t.showPassword?"text":"password")?i("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-field__input",attrs:{id:"password",type:"radio"},domProps:{checked:t._q(t.user.password,null)},on:{change:function(e){return t.$set(t.user,"password",null)}}}):i("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-field__input",attrs:{id:"password",type:t.showPassword?"text":"password"},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}})]),t.isLogin?t._e():i("div",{staticClass:"form-field"},[i("label",{staticClass:"form-field__label",attrs:{for:"password_confirmation"}},[t._v("Confirm Password")]),i("p",{staticClass:"form-field__error"},[t._v(t._s(t.fieldErrors.password_confirmation&&"Password confrimation "+t.fieldErrors.password_confirmation[0]))]),"checkbox"===(t.showPassword?"text":"password")?i("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password_confirmation,expression:"user.password_confirmation"}],staticClass:"form-field__input",attrs:{id:"password_confirmation",type:"checkbox"},domProps:{checked:Array.isArray(t.user.password_confirmation)?t._i(t.user.password_confirmation,null)>-1:t.user.password_confirmation},on:{change:function(e){var s=t.user.password_confirmation,i=e.target,n=!!i.checked;if(Array.isArray(s)){var r=null,a=t._i(s,r);i.checked?a<0&&t.$set(t.user,"password_confirmation",s.concat([r])):a>-1&&t.$set(t.user,"password_confirmation",s.slice(0,a).concat(s.slice(a+1)))}else t.$set(t.user,"password_confirmation",n)}}}):"radio"===(t.showPassword?"text":"password")?i("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password_confirmation,expression:"user.password_confirmation"}],staticClass:"form-field__input",attrs:{id:"password_confirmation",type:"radio"},domProps:{checked:t._q(t.user.password_confirmation,null)},on:{change:function(e){return t.$set(t.user,"password_confirmation",null)}}}):i("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password_confirmation,expression:"user.password_confirmation"}],staticClass:"form-field__input",attrs:{id:"password_confirmation",type:t.showPassword?"text":"password"},domProps:{value:t.user.password_confirmation},on:{input:function(e){e.target.composing||t.$set(t.user,"password_confirmation",e.target.value)}}})]),i("button",{staticClass:"button cta--is-close",attrs:{type:"button"},on:{click:function(e){t.showPassword=!t.showPassword}}},[t._v(" "+t._s(t.showPassword?"Hide Password":"Show Password")+" ")]),i("div",{staticClass:"form__submit"},[i("input",{staticClass:"button",attrs:{type:"submit"},domProps:{value:t.isLogin?"Log In":"Sign Up"}})])]):t._e()])},Xt=[],te={name:"Login",mixins:[ht],props:{isAdmin:Boolean},data:function(){return{formError:"",formMessage:"",fieldErrors:{},isSubmitting:!1,user:{email:"",password:"",password_confirmation:""},showPassword:!1}},computed:{isLogin:function(){return 0==this.store.loginIndex},passwordReturnPress:function(){return this.isLogin?this.onSubmit:function(){}}},methods:{onSubmit:function(t){var e=this;this.formError="",this.formMessage="",this.fieldErrors={},this.isSubmitting=!0,"function"==typeof t.preventDefault&&t.preventDefault(),this.isLogin?it.login(this.user).then((function(){return e.$emit("authSuccess",e.isAdmin)})).catch(this.onSubmitError):it.signup(this.user).then((function(t){t.data.approved?it.login(e.user).then((function(){return e.$emit("authSuccess",e.isAdmin)})).catch((function(){e.formMessage="You have successfully signed up but we had a problem logging you in. Please try again from the login page."})):(e.store.loginIndex=2,e.formMessage="You have signed up successfully but we don't recognize your email address, so your account has not been approved by your administrator yet. We'll email you when it's time to come back and log in!")})).catch(this.onSubmitError)},onSubmitError:function(t){this.isSubmitting=!1;var e=t.response.data;e.error_description?this.formError=e.error_description:this.fieldErrors=e.errors}}},ee=te,se=(s("6f19"),Object(l["a"])(ee,Gt,Xt,!1,null,null,null)),ie=se.exports,ne=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"side-padded"},[s("back-button"),s("h1",{staticClass:"h1 text-center"},[t._v("My Account")]),s("div",{staticClass:"text-center user-view-section"},[t.store.isAdmin?s("router-link",{staticClass:"button",attrs:{to:{name:"AdminApproval"}}},[t._v("Admin Panel")]):t._e()],1),s("div",{staticClass:"user-view-section text-center"},[s("h2",{staticClass:"h2 text-center"},[t._v("My App Store Codes")]),s("p",{staticClass:"p"},[t._v("(you need one of these to download the iOS app)")]),t.appCodes.length?s("ul",{staticClass:"plain-list"},t._l(t.appCodes,(function(e){return s("li",{key:e.id},[s("a",{staticClass:"link",attrs:{href:"https://apps.apple.com/WebObjects/MZFinance.woa/wa/freeProductCodeWizard?code="+e.code}},[t._v(t._s(e.code))])])})),0):s("p",{staticClass:"p text-center"},[t._v("You don't have any app store codes")]),s("button",{staticClass:"button",on:{click:t.requestCode}},[t._v("Request a new code")])]),s("div",{staticClass:"user-view-section"},[s("h2",{staticClass:"h2 text-center"},[t._v("My Posts")]),t.shifts.length?s("ul",t._l(t.shifts,(function(t,e){return s("ShiftListItem",{key:e,attrs:{shift:t,"is-user":!0}})})),1):s("p",{staticClass:"text-center p"},[t._v("You don't have any current shifts posted. "),s("router-link",{staticClass:"link",attrs:{to:{name:"ShiftForm"}}},[t._v("Make a new post")])],1)]),s("div",{staticClass:"text-center"},[s("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(e){return t.$emit("logout")}}},[t._v("Log Out")])])],1)},re=[],ae=(s("a9e3"),{name:"UserView",mixins:[ht],components:{ShiftListItem:Ct},data:function(){return{appCodes:[],codeStatusText:""}},props:{scrollIndex:Number},computed:{shifts:function(){return this.store.userList}},methods:{showShift:function(t){var e=this.shifts[t];e.isUser=!0,this.$emit("shiftSelected",e,!0)},getShifts:function(t){var e=this,s=function(){t&&t.object.notifyPullToRefreshFinished()};it.getShifts({is_user:!0},(function(t){e.store.userList=t,s()}),(function(t){t.response&&401==t.response.status?e.$emit("logout"):s()}))},requestCode:function(){var t=this;this.codeStatusText="Requesting...",it.requestCode().then((function(e){t.codeStatusText="",t.appCodes.push(e.data)})).catch((function(e){t.codeStatusText=e}))}},mounted:function(){var t=this;this.getShifts(),it.getUserCodes().then((function(e){return t.appCodes=e.data}))}}),oe=ae,ue=(s("9249"),Object(l["a"])(oe,ne,re,!1,null,"15e640d8",null)),ce=ue.exports,le={ShiftForm:gt,ShiftList:Yt,ShiftView:Zt,Login:ie,UserView:ce},fe={data:function(){var t={store:dt,notification:""};return t},computed:{currentRoute:function(){return this.$route?this.$route.name:this.currentPage&&this.currentPage.name},currentPageListeners:function(){var t=this,e=function(){return t.setCurrentPage("ShiftList")},s={};switch(this.currentRoute){case"ShiftList":s={shiftSelected:this.onShiftSelected,listRequested:this.loadList};break;case"UserView":s={shiftSelected:this.onShiftSelected,back:e,logout:this.logout};break;case"Login":case"AdminLogin":case"Signup":s={authSuccess:function(s){t.store.isAuthed=!0,s?t.setCurrentPage("AdminApproval"):e()}};break;case"ShiftView":s={back:function(){var e=t.store.selectedShift.isUser?"UserView":"ShiftList";t.setCurrentPage(e)}};break;default:s={back:e};break}return s},menuTabs:function(){var t=this;if(this.currentRoute&&this.currentRoute.includes("Admin"))return"AdminLogin"==this.currentRoute?[]:[{title:"Manage Admins",route:{name:"AdminManagement"},isSelected:"AdminManagement"==this.currentRoute},{title:"Approve Users",route:{name:"AdminApproval"},isSelected:"AdminApproval"==this.currentRoute},{title:"App Codes",route:{name:"AdminCodes"},isSelected:"AdminCodes"==this.currentRoute}];if(this.store.isAuthed){var e=this.store.selectedShift;return[{title:"Post a Shift",action:function(){return t.setCurrentPage("ShiftForm")},isSelected:"ShiftForm"==this.currentRoute,route:{name:"ShiftForm"}},{title:"Find a Shift",action:function(){return t.setCurrentPage("ShiftList")},isSelected:"ShiftList"==this.currentRoute||e&&!e.isUser,route:{name:"ShiftList"}},{title:"My Account",action:function(){return t.setCurrentPage("UserView")},isSelected:"UserView"==this.currentRoute||e&&e.isUser,route:{name:"UserView"}}]}return[{title:"Returning User",action:function(){return t.store.loginIndex=0},isSelected:0==this.store.loginIndex,route:{name:"Login"}},{title:"New User",action:function(){return t.store.loginIndex=1},isSelected:this.store.loginIndex>0,route:{name:"Signup"}}]}},methods:{saveState:function(){},setCurrentPage:function(t){var e="ShiftList"==t?this.store.currentFilters:{};return this.$router.push({name:t,query:e})},onShiftSelected:function(t){this.store.selectedShift=t,this.setCurrentPage("ShiftView")},loadList:function(t,e){this.store.currentFilters.equals(t)||(this.store.currentFilters=t),this.store.loadList(e)},logout:function(){var t=Object(O["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.store.logout();case 2:e=t.sent,e?(this.store.isAuthed=!1,this.setCurrentPage("Login")):this.notify("Somehow we were unable to log you out. Please try again later");case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),notify:function(t){var e=this;this.notification=t,setTimeout((function(){e.notification=""}),6e4)}},created:function(){this.store.onListError=this.logout,this.store.saveStateMethod=this.saveState}},de=fe,he=(s("edbd"),Object(l["a"])(de,F,L,!1,null,null,null)),me=he.exports,pe=(s("45fc"),s("8c4f")),ve=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.users.length?s("form",{staticClass:"users-form side-padded",on:{submit:t.submitUsers}},[s("back-button",{attrs:{to:{name:"ShiftList"}}}),s("h1",{staticClass:"h1"},[t._v(t._s(t.title))]),s("table",{staticClass:"users-table"},[s("tr",[s("th",[s("button",{staticClass:"table-sort fas",attrs:{type:"button"},on:{click:function(e){return t.sortBy("email")}}},[s("span",{staticClass:"table-sort__icon fas",class:["email"==t.sortField?"fa-chevron-"+t.sortDirection:"fa-minus"]}),t._v(" Email ")])]),s("th",{staticClass:"users-table__input"},[s("button",{staticClass:"table-sort",attrs:{type:"button"},on:{click:function(e){return t.sortBy(t.propName)}}},[s("span",{staticClass:"table-sort__icon fas",class:[t.sortField==t.propName?"fa-chevron-"+t.sortDirection:"fa-minus"]}),t._v(" "+t._s(t.columnName)+" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.allSelected,expression:"allSelected"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.allSelected)?t._i(t.allSelected,null)>-1:t.allSelected},on:{change:function(e){var s=t.allSelected,i=e.target,n=!!i.checked;if(Array.isArray(s)){var r=null,a=t._i(s,r);i.checked?a<0&&(t.allSelected=s.concat([r])):a>-1&&(t.allSelected=s.slice(0,a).concat(s.slice(a+1)))}else t.allSelected=n}}})])])]),t._l(t.sortedUsers,(function(e){return s("tr",{key:e.id,staticClass:"users-table__user"},[s("td",{staticClass:"user__email"},[t._v(t._s(e.email))]),s("td",{staticClass:"users-table__input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedUsers,expression:"selectedUsers"}],attrs:{type:"checkbox"},domProps:{value:e.id,checked:Array.isArray(t.selectedUsers)?t._i(t.selectedUsers,e.id)>-1:t.selectedUsers},on:{change:function(s){var i=t.selectedUsers,n=s.target,r=!!n.checked;if(Array.isArray(i)){var a=e.id,o=t._i(i,a);n.checked?o<0&&(t.selectedUsers=i.concat([a])):o>-1&&(t.selectedUsers=i.slice(0,o).concat(i.slice(o+1)))}else t.selectedUsers=r}}})])])}))],2),s("input",{staticClass:"button",attrs:{type:"submit"}}),s("div",{staticClass:"users-form__form-status",class:t.statusClass},[t._v(t._s(t.status))])],1):s("div",[t._v(" No users "+t._s(t.title.toLowerCase())+" ")])},ge=[],be={name:"AdminPanel",data:function(){return{users:[],selectedUsers:[],status:"",title:"",confirmationText:"",columnName:"",allUsers:void 0,sortField:void 0,sortDirection:"down",statusClass:""}},props:{propName:String},watch:{propName:function(t){this.onPropChange(t)}},computed:{allSelected:{get:function(){return this.users.length==this.selectedUsers.length},set:function(t){this.selectedUsers=t?this.users.map((function(t){return t.id})):[]}},sortedUsers:function(){var t=this;return this.users.slice().sort((function(e,s){var i=0,n=e[t.sortField],r=s[t.sortField];return"boolean"==typeof n?(n&&!r&&(i=-1),r&&!n&&(i=1)):"string"==typeof n&&(i=n.localeCompare(r)),"up"==t.sortDirection&&(i*=-1),i}))}},methods:{submitUsers:function(t){var e=this;if(t.preventDefault&&t.preventDefault(),this.status="",this.statusClass="",0!==this.selectedUsers.length)it.adminPost(this.propName,this.selectedUsers).then((function(t){t.data?(e.status="Successfully ".concat(e.confirmationText),e.loadUsers()):(e.statusClass="form__error",e.status="Uh oh! something went wrong")}));else{switch(this.propName){case"approved":this.status="Opps, you didn't select anyone to approve!";break;case"admin":this.status="You must have at least one admin user."}this.statusClass="form__error"}},loadUsers:function(){var t=this;it.getAdminData(this.allUsers).then((function(e){t.users=e.data,t.selectedUsers=[],t.users.forEach((function(e){e[t.propName]&&t.selectedUsers.push(e.id)}))})).catch((function(e){401==e.response.status?t.$router.replace({path:"/shifts"}):console.log(e)}))},sortBy:function(t){t==this.sortField?this.sortDirection="down"==this.sortDirection?"up":"down":(this.sortField=t,this.sortDirection="down")},onPropChange:function(t){switch(t){case"approved":this.title="Users Awaiting Approval",this.confirmationText="approved users",this.columnName="Approved",this.allUsers=void 0;break;case"admin":this.title="Manage Admin Users",this.confirmationText="set admin users",this.columnName="Admin",this.allUsers=!0}this.status="",this.sortField=t,this.loadUsers()}},mounted:function(){this.onPropChange(this.propName)}},_e=be,we=(s("61ae"),Object(l["a"])(_e,ve,ge,!1,null,null,null)),ye=we.exports,ke=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"side-padded text-center"},[s("h1",{staticClass:"h1"},[t._v("App Store Codes")]),s("h2",{staticClass:"h2"},[t._v("Codes remaining: "+t._s(t.numCodes))]),s("br"),t._m(0),s("br"),s("form",{on:{submit:t.submitCodes}},[s("label",{attrs:{for:"codes"}},[t._v("Enter new codes (each code should be on its own line)")]),s("div",{staticClass:"side-padded"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.codes,expression:"codes"}],attrs:{name:"codes",id:"codes",cols:"30",rows:"20"},domProps:{value:t.codes},on:{input:function(e){e.target.composing||(t.codes=e.target.value)}}})]),s("p",[t._v(t._s(t.statusText))]),s("input",{staticClass:"button",attrs:{type:"submit"}})])])},Se=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[s("a",{staticClass:"link",attrs:{href:"https://business.apple.com/#main/b2bapps"}},[t._v("get more codes here")])])}],Ce={name:"CodeUploader",data:function(){return{numCodes:"loading...",codes:"",statusText:""}},methods:{submitCodes:function(t){var e=this;if(t.preventDefault&&t.preventDefault(),this.statusText="",""!=this.codes){this.statusText="submitting...";var s=this.codes.split("\n");it.submitCodes(s).then((function(t){e.numCodes=t.data,e.statusText="successfully submitted codes"})).catch((function(t){e.statusText=t}))}}},mounted:function(){var t=this;it.getCodesCount().then((function(e){return t.numCodes=e}))}},xe=Ce,Fe=Object(l["a"])(xe,ke,Se,!1,null,null,null),Le=Fe.exports,Oe=[{path:"/me",name:"UserView",component:le.UserView},{path:"/me/:id",name:"UserShiftView",component:le.ShiftView,meta:{isUser:!0}},{path:"/shift/:id",name:"ShiftView",component:le.ShiftView},{path:"/shifts",name:"ShiftList",component:le.ShiftList,beforeEnter:function(t,e,s){0===Object.keys(t.query).length?s({name:"ShiftList",query:Object.assign(t.query,dt.currentFilters.asQuery())}):(dt.currentFilters=new ot(t.query),s())}},{path:"/shifts/new",name:"ShiftForm",component:le.ShiftForm},{path:"/login",name:"Login",component:le.Login,meta:{skipAuth:!0},beforeEnter:function(t,e,s){dt.loginIndex=0,s()}},{path:"/signup",name:"Signup",component:le.Login,meta:{skipAuth:!0},beforeEnter:function(t,e,s){dt.loginIndex=1,s()}},{path:"/admin/login",name:"AdminLogin",component:le.Login,meta:{skipAuth:!0},props:{isAdmin:!0},beforeEnter:function(t,e,s){dt.loginIndex=0,s()}},{path:"/admin/approve",name:"AdminApproval",component:ye,props:{propName:"approved"}},{path:"/admin/admins",name:"AdminManagement",component:ye,props:{propName:"admin"}},{path:"/admin/codes",name:"AdminCodes",component:Le}],Ae=new pe["a"]({mode:"history",base:"/",routes:Oe,scrollBehavior:function(t,e,s){return s||{x:0,y:0}}});Ae.beforeEach(function(){var t=Object(O["a"])(regeneratorRuntime.mark((function t(e,s,i){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=dt.isAuthed,null!==n){t.next=5;break}return t.next=4,dt.testToken();case 4:n=t.sent;case 5:r=e.matched.some((function(t){return t.name&&t.name.includes("Admin")})),e.matched.some((function(t){return!t.meta.skipAuth==n}))?i():n?(a=r?{name:"AdminApproval"}:{name:"ShiftList",query:dt.currentFilters.asQuery()},i(a)):i({name:r?"AdminLogin":"Login"});case 7:case"end":return t.stop()}}),t)})));return function(e,s,i){return t.apply(this,arguments)}}());var Pe=Ae;x(i["a"]),i["a"].use(pe["a"]),i["a"].use(Et),new i["a"]({methods:{openUrl:function(){}},router:Pe,render:function(t){return t(me)}}).$mount("#app")},d31b:function(t,e,s){"use strict";var i=s("8b36"),n=s.n(i);n.a},ea45:function(t,e,s){},edbd:function(t,e,s){"use strict";var i=s("64dc"),n=s.n(i);n.a},fae0:function(t,e,s){}});
//# sourceMappingURL=app.18d22dda.js.map